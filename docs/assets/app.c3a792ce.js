import{V as t,f as e,_ as i,p as n,v as s,L as r,ap as o,O as a,ah as h,a3 as l,a5 as c,a6 as u,t as p,q as f,F as _,z as d,u as g,E as y,as as m,n as b,M as v,$ as E,g as T,C as P,at as O,Y as A,ao as R,aq as I,ar as C}from"./babylon.86bef7cb.js";import{T as M,S as w,D as x,c as S,B as N,f as L,g as D,a as k}from"./scene.0b110e13.js";import{m as B,r as F}from"./index.071f9e94.js";function j(t,e){const i=Object.create(null),n=t.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}const U=j("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),V=j("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function H(t){if(ot(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=H(ct(n)?z(n):n);if(s)for(const t in s)e[t]=s[t]}return e}if(pt(t))return t}const W=/;(?![^(]*\))/g,G=/:(.+)/;function z(t){const e={};return t.split(W).forEach((t=>{if(t){const i=t.split(G);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}function X(t){let e="";if(ct(t))e=t;else if(ot(t))for(let i=0;i<t.length;i++){const n=X(t[i]);n&&(e+=n+" ")}else if(pt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Y=t=>null==t?"":pt(t)?JSON.stringify(t,Q,2):String(t),Q=(t,e)=>at(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,i])=>(t[`${e} =>`]=i,t)),{})}:ht(e)?{[`Set(${e.size})`]:[...e.values()]}:!pt(e)||ot(e)||gt(e)?e:String(e),J={},Z=[],$=()=>{},q=()=>!1,K=/^on[^a-z]/,tt=t=>K.test(t),et=t=>t.startsWith("onUpdate:"),it=Object.assign,nt=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},st=Object.prototype.hasOwnProperty,rt=(t,e)=>st.call(t,e),ot=Array.isArray,at=t=>"[object Map]"===dt(t),ht=t=>"[object Set]"===dt(t),lt=t=>"function"==typeof t,ct=t=>"string"==typeof t,ut=t=>"symbol"==typeof t,pt=t=>null!==t&&"object"==typeof t,ft=t=>pt(t)&&lt(t.then)&&lt(t.catch),_t=Object.prototype.toString,dt=t=>_t.call(t),gt=t=>"[object Object]"===dt(t),yt=t=>ct(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,mt=j(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bt=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},vt=/-(\w)/g,Et=bt((t=>t.replace(vt,((t,e)=>e?e.toUpperCase():"")))),Tt=/\B([A-Z])/g,Pt=bt((t=>t.replace(Tt,"-$1").toLowerCase())),Ot=bt((t=>t.charAt(0).toUpperCase()+t.slice(1))),At=bt((t=>t?`on${Ot(t)}`:"")),Rt=(t,e)=>t!==e&&(t==t||e==e),It=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},Ct=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},Mt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},wt=new WeakMap,xt=[];let St;const Nt=Symbol(""),Lt=Symbol("");function Dt(t,e=J){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const i=function(t,e){const i=function(){if(!i.active)return t();if(!xt.includes(i)){Ft(i);try{return Ut.push(jt),jt=!0,xt.push(i),St=i,t()}finally{xt.pop(),Ht(),St=xt[xt.length-1]}}};return i.id=Bt++,i.allowRecurse=!!e.allowRecurse,i._isEffect=!0,i.active=!0,i.raw=t,i.deps=[],i.options=e,i}(t,e);return e.lazy||i(),i}function kt(t){t.active&&(Ft(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let Bt=0;function Ft(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let jt=!0;const Ut=[];function Vt(){Ut.push(jt),jt=!1}function Ht(){const t=Ut.pop();jt=void 0===t||t}function Wt(t,e,i){if(!jt||void 0===St)return;let n=wt.get(t);n||wt.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=new Set),s.has(St)||(s.add(St),St.deps.push(s))}function Gt(t,e,i,n,s,r){const o=wt.get(t);if(!o)return;const a=new Set,h=t=>{t&&t.forEach((t=>{(t!==St||t.allowRecurse)&&a.add(t)}))};if("clear"===e)o.forEach(h);else if("length"===i&&ot(t))o.forEach(((t,e)=>{("length"===e||e>=n)&&h(t)}));else switch(void 0!==i&&h(o.get(i)),e){case"add":ot(t)?yt(i)&&h(o.get("length")):(h(o.get(Nt)),at(t)&&h(o.get(Lt)));break;case"delete":ot(t)||(h(o.get(Nt)),at(t)&&h(o.get(Lt)));break;case"set":at(t)&&h(o.get(Nt))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const zt=j("__proto__,__v_isRef,__isVue"),Xt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(ut)),Yt=qt(),Qt=qt(!1,!0),Jt=qt(!0),Zt=qt(!0,!0),$t={};function qt(t=!1,e=!1){return function(i,n,s){if("__v_isReactive"===n)return!t;if("__v_isReadonly"===n)return t;if("__v_raw"===n&&s===(t?e?Ce:Ie:e?Re:Ae).get(i))return i;const r=ot(i);if(!t&&r&&rt($t,n))return Reflect.get($t,n,s);const o=Reflect.get(i,n,s);if(ut(n)?Xt.has(n):zt(n))return o;if(t||Wt(i,0,n),e)return o;if(Fe(o)){return!r||!yt(n)?o.value:o}return pt(o)?t?xe(o):we(o):o}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];$t[t]=function(...t){const i=ke(this);for(let e=0,s=this.length;e<s;e++)Wt(i,0,e+"");const n=e.apply(i,t);return-1===n||!1===n?e.apply(i,t.map(ke)):n}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];$t[t]=function(...t){Vt();const i=e.apply(this,t);return Ht(),i}}));function Kt(t=!1){return function(e,i,n,s){let r=e[i];if(!t&&(n=ke(n),r=ke(r),!ot(e)&&Fe(r)&&!Fe(n)))return r.value=n,!0;const o=ot(e)&&yt(i)?Number(i)<e.length:rt(e,i),a=Reflect.set(e,i,n,s);return e===ke(s)&&(o?Rt(n,r)&&Gt(e,"set",i,n):Gt(e,"add",i,n)),a}}const te={get:Yt,set:Kt(),deleteProperty:function(t,e){const i=rt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&i&&Gt(t,"delete",e,void 0),n},has:function(t,e){const i=Reflect.has(t,e);return ut(e)&&Xt.has(e)||Wt(t,0,e),i},ownKeys:function(t){return Wt(t,0,ot(t)?"length":Nt),Reflect.ownKeys(t)}},ee={get:Jt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},ie=it({},te,{get:Qt,set:Kt(!0)});it({},ee,{get:Zt});const ne=t=>pt(t)?we(t):t,se=t=>pt(t)?xe(t):t,re=t=>t,oe=t=>Reflect.getPrototypeOf(t);function ae(t,e,i=!1,n=!1){const s=ke(t=t.__v_raw),r=ke(e);e!==r&&!i&&Wt(s,0,e),!i&&Wt(s,0,r);const{has:o}=oe(s),a=n?re:i?se:ne;return o.call(s,e)?a(t.get(e)):o.call(s,r)?a(t.get(r)):void(t!==s&&t.get(e))}function he(t,e=!1){const i=this.__v_raw,n=ke(i),s=ke(t);return t!==s&&!e&&Wt(n,0,t),!e&&Wt(n,0,s),t===s?i.has(t):i.has(t)||i.has(s)}function le(t,e=!1){return t=t.__v_raw,!e&&Wt(ke(t),0,Nt),Reflect.get(t,"size",t)}function ce(t){t=ke(t);const e=ke(this);return oe(e).has.call(e,t)||(e.add(t),Gt(e,"add",t,t)),this}function ue(t,e){e=ke(e);const i=ke(this),{has:n,get:s}=oe(i);let r=n.call(i,t);r||(t=ke(t),r=n.call(i,t));const o=s.call(i,t);return i.set(t,e),r?Rt(e,o)&&Gt(i,"set",t,e):Gt(i,"add",t,e),this}function pe(t){const e=ke(this),{has:i,get:n}=oe(e);let s=i.call(e,t);s||(t=ke(t),s=i.call(e,t)),n&&n.call(e,t);const r=e.delete(t);return s&&Gt(e,"delete",t,void 0),r}function fe(){const t=ke(this),e=0!==t.size,i=t.clear();return e&&Gt(t,"clear",void 0,void 0),i}function _e(t,e){return function(i,n){const s=this,r=s.__v_raw,o=ke(r),a=e?re:t?se:ne;return!t&&Wt(o,0,Nt),r.forEach(((t,e)=>i.call(n,a(t),a(e),s)))}}function de(t,e,i){return function(...n){const s=this.__v_raw,r=ke(s),o=at(r),a="entries"===t||t===Symbol.iterator&&o,h="keys"===t&&o,l=s[t](...n),c=i?re:e?se:ne;return!e&&Wt(r,0,h?Lt:Nt),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:a?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function ge(t){return function(...e){return"delete"!==t&&this}}const ye={get(t){return ae(this,t)},get size(){return le(this)},has:he,add:ce,set:ue,delete:pe,clear:fe,forEach:_e(!1,!1)},me={get(t){return ae(this,t,!1,!0)},get size(){return le(this)},has:he,add:ce,set:ue,delete:pe,clear:fe,forEach:_e(!1,!0)},be={get(t){return ae(this,t,!0)},get size(){return le(this,!0)},has(t){return he.call(this,t,!0)},add:ge("add"),set:ge("set"),delete:ge("delete"),clear:ge("clear"),forEach:_e(!0,!1)},ve={get(t){return ae(this,t,!0,!0)},get size(){return le(this,!0)},has(t){return he.call(this,t,!0)},add:ge("add"),set:ge("set"),delete:ge("delete"),clear:ge("clear"),forEach:_e(!0,!0)};function Ee(t,e){const i=e?t?ve:me:t?be:ye;return(e,n,s)=>"__v_isReactive"===n?!t:"__v_isReadonly"===n?t:"__v_raw"===n?e:Reflect.get(rt(i,n)&&n in e?i:e,n,s)}["keys","values","entries",Symbol.iterator].forEach((t=>{ye[t]=de(t,!1,!1),be[t]=de(t,!0,!1),me[t]=de(t,!1,!0),ve[t]=de(t,!0,!0)}));const Te={get:Ee(!1,!1)},Pe={get:Ee(!1,!0)},Oe={get:Ee(!0,!1)},Ae=new WeakMap,Re=new WeakMap,Ie=new WeakMap,Ce=new WeakMap;function Me(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>dt(t).slice(8,-1))(t))}function we(t){return t&&t.__v_isReadonly?t:Se(t,!1,te,Te,Ae)}function xe(t){return Se(t,!0,ee,Oe,Ie)}function Se(t,e,i,n,s){if(!pt(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=Me(t);if(0===o)return t;const a=new Proxy(t,2===o?n:i);return s.set(t,a),a}function Ne(t){return Le(t)?Ne(t.__v_raw):!(!t||!t.__v_isReactive)}function Le(t){return!(!t||!t.__v_isReadonly)}function De(t){return Ne(t)||Le(t)}function ke(t){return t&&ke(t.__v_raw)||t}const Be=t=>pt(t)?we(t):t;function Fe(t){return Boolean(t&&!0===t.__v_isRef)}function je(t){return function(t,e=!1){if(Fe(t))return t;return new Ue(t,e)}(t)}class Ue{constructor(t,e=!1){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:Be(t)}get value(){return Wt(ke(this),0,"value"),this._value}set value(t){Rt(ke(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:Be(t),Gt(ke(this),"set","value",t))}}function Ve(t){return Fe(t)?t.value:t}const He={get:(t,e,i)=>Ve(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return Fe(s)&&!Fe(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function We(t){return Ne(t)?t:new Proxy(t,He)}class Ge{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class ze{constructor(t,e,i){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=Dt(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,Gt(ke(this),"set","value"))}}),this.__v_isReadonly=i}get value(){const t=ke(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),Wt(t,0,"value"),t._value}set value(t){this._setter(t)}}function Xe(t,e,i,n){let s;try{s=n?t(...n):t()}catch(r){Qe(r,e,i)}return s}function Ye(t,e,i,n){if(lt(t)){const s=Xe(t,e,i,n);return s&&ft(s)&&s.catch((t=>{Qe(t,e,i)})),s}const s=[];for(let r=0;r<t.length;r++)s.push(Ye(t[r],e,i,n));return s}function Qe(t,e,i,n=!0){e&&e.vnode;if(e){let n=e.parent;const s=e.proxy,r=i;for(;n;){const e=n.ec;if(e)for(let i=0;i<e.length;i++)if(!1===e[i](t,s,r))return;n=n.parent}const o=e.appContext.config.errorHandler;if(o)return void Xe(o,null,10,[t,s,r])}!function(t,e,i,n=!0){console.error(t)}(t,0,0,n)}let Je=!1,Ze=!1;const $e=[];let qe=0;const Ke=[];let ti=null,ei=0;const ii=[];let ni=null,si=0;const ri=Promise.resolve();let oi=null,ai=null;function hi(t){const e=oi||ri;return t?e.then(this?t.bind(this):t):e}function li(t){if(!($e.length&&$e.includes(t,Je&&t.allowRecurse?qe+1:qe)||t===ai)){const e=function(t){let e=qe+1,i=$e.length;const n=_i(t);for(;e<i;){const t=e+i>>>1;_i($e[t])<n?e=t+1:i=t}return e}(t);e>-1?$e.splice(e,0,t):$e.push(t),ci()}}function ci(){Je||Ze||(Ze=!0,oi=ri.then(di))}function ui(t,e,i,n){ot(t)?i.push(...t):e&&e.includes(t,t.allowRecurse?n+1:n)||i.push(t),ci()}function pi(t,e=null){if(Ke.length){for(ai=e,ti=[...new Set(Ke)],Ke.length=0,ei=0;ei<ti.length;ei++)ti[ei]();ti=null,ei=0,ai=null,pi(t,e)}}function fi(t){if(ii.length){const t=[...new Set(ii)];if(ii.length=0,ni)return void ni.push(...t);for(ni=t,ni.sort(((t,e)=>_i(t)-_i(e))),si=0;si<ni.length;si++)ni[si]();ni=null,si=0}}const _i=t=>null==t.id?1/0:t.id;function di(t){Ze=!1,Je=!0,pi(t),$e.sort(((t,e)=>_i(t)-_i(e)));try{for(qe=0;qe<$e.length;qe++){const t=$e[qe];t&&!1!==t.active&&Xe(t,null,14)}}finally{qe=0,$e.length=0,fi(),Je=!1,oi=null,($e.length||Ke.length||ii.length)&&di(t)}}function gi(t,e,...i){const n=t.vnode.props||J;let s=i;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in n){const t=`${"modelValue"===o?"model":o}Modifiers`,{number:e,trim:r}=n[t]||J;r?s=i.map((t=>t.trim())):e&&(s=i.map(Mt))}let a,h=n[a=At(e)]||n[a=At(Et(e))];!h&&r&&(h=n[a=At(Pt(e))]),h&&Ye(h,t,6,s);const l=n[a+"Once"];if(l){if(t.emitted){if(t.emitted[a])return}else(t.emitted={})[a]=!0;Ye(l,t,6,s)}}function yi(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(void 0!==s)return s;const r=t.emits;let o={},a=!1;if(!lt(t)){const n=t=>{const i=yi(t,e,!0);i&&(a=!0,it(o,i))};!i&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}return r||a?(ot(r)?r.forEach((t=>o[t]=null)):it(o,r),n.set(t,o),o):(n.set(t,null),null)}function mi(t,e){return!(!t||!tt(e))&&(e=e.slice(2).replace(/Once$/,""),rt(t,e[0].toLowerCase()+e.slice(1))||rt(t,Pt(e))||rt(t,e))}let bi=null,vi=null;function Ei(t){const e=bi;return bi=t,vi=t&&t.type.__scopeId||null,e}function Ti(t){const{type:e,vnode:i,proxy:n,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:h,emit:l,render:c,renderCache:u,data:p,setupState:f,ctx:_,inheritAttrs:d}=t;let g;const y=Ei(t);try{let t;if(4&i.shapeFlag){const e=s||n;g=qn(c.call(e,e,u,r,f,p,_)),t=h}else{const i=e;0,g=qn(i.length>1?i(r,{attrs:h,slots:a,emit:l}):i(r,null)),t=e.props?h:Pi(h)}let y=g;if(t&&!1!==d){const e=Object.keys(t),{shapeFlag:i}=y;e.length&&(1&i||6&i)&&(o&&e.some(et)&&(t=Oi(t,o)),y=Jn(y,t))}0,i.dirs&&(y.dirs=y.dirs?y.dirs.concat(i.dirs):i.dirs),i.transition&&(y.transition=i.transition),g=y}catch(m){Bn.length=0,Qe(m,t,1),g=Qn(Dn)}return Ei(y),g}const Pi=t=>{let e;for(const i in t)("class"===i||"style"===i||tt(i))&&((e||(e={}))[i]=t[i]);return e},Oi=(t,e)=>{const i={};for(const n in t)et(n)&&n.slice(9)in e||(i[n]=t[n]);return i};function Ai(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==t[r]&&!mi(i,r))return!0}return!1}function Ri(t,e,i=!1){const n=as||bi;if(n){const s=null==n.parent?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return i&&lt(e)?e():e}}const Ii={};function Ci(t,e,i){return Mi(t,e,i)}function Mi(t,e,{immediate:i,deep:n,flush:s,onTrack:r,onTrigger:o}=J,a=as){let h,l,c=!1,u=!1;if(Fe(t)?(h=()=>t.value,c=!!t._shallow):Ne(t)?(h=()=>t,n=!0):ot(t)?(u=!0,c=t.some(Ne),h=()=>t.map((t=>Fe(t)?t.value:Ne(t)?Si(t):lt(t)?Xe(t,a,2):void 0))):h=lt(t)?e?()=>Xe(t,a,2):()=>{if(!a||!a.isUnmounted)return l&&l(),Ye(t,a,3,[p])}:$,e&&n){const t=h;h=()=>Si(t())}let p=t=>{l=g.options.onStop=()=>{Xe(t,a,4)}},f=u?[]:Ii;const _=()=>{if(g.active)if(e){const t=g();(n||c||(u?t.some(((t,e)=>Rt(t,f[e]))):Rt(t,f)))&&(l&&l(),Ye(e,a,3,[t,f===Ii?void 0:f,p]),f=t)}else g()};let d;_.allowRecurse=!!e,d="sync"===s?_:"post"===s?()=>In(_,a&&a.suspense):()=>{!a||a.isMounted?function(t){ui(t,ti,Ke,ei)}(_):_()};const g=Dt(h,{lazy:!0,onTrack:r,onTrigger:o,scheduler:d});return fs(g,a),e?i?_():f=g():"post"===s?In(g,a&&a.suspense):g(),()=>{kt(g),a&&nt(a.effects,g)}}function wi(t,e,i){const n=this.proxy,s=ct(t)?t.includes(".")?xi(n,t):()=>n[t]:t.bind(n,n);let r;return lt(e)?r=e:(r=e.handler,i=e),Mi(s,r.bind(n),i,this)}function xi(t,e){const i=e.split(".");return()=>{let e=t;for(let t=0;t<i.length&&e;t++)e=e[i[t]];return e}}function Si(t,e=new Set){if(!pt(t)||e.has(t)||t.__v_skip)return t;if(e.add(t),Fe(t))Si(t.value,e);else if(ot(t))for(let i=0;i<t.length;i++)Si(t[i],e);else if(ht(t)||at(t))t.forEach((t=>{Si(t,e)}));else if(gt(t))for(const i in t)Si(t[i],e);return t}const Ni=t=>!!t.type.__asyncLoader,Li=t=>t.type.__isKeepAlive;function Di(t,e){Bi(t,"a",e)}function ki(t,e){Bi(t,"da",e)}function Bi(t,e,i=as){const n=t.__wdc||(t.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(ji(e,n,i),i){let t=i.parent;for(;t&&t.parent;)Li(t.parent.vnode)&&Fi(n,e,i,t),t=t.parent}}function Fi(t,e,i,n){const s=ji(e,t,n,!0);Xi((()=>{nt(n[e],s)}),i)}function ji(t,e,i=as,n=!1){if(i){const s=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...n)=>{if(i.isUnmounted)return;Vt(),hs(i);const s=Ye(e,i,t,n);return hs(null),Ht(),s});return n?s.unshift(r):s.push(r),r}}const Ui=t=>(e,i=as)=>(!cs||"sp"===t)&&ji(t,e,i),Vi=Ui("bm"),Hi=Ui("m"),Wi=Ui("bu"),Gi=Ui("u"),zi=Ui("bum"),Xi=Ui("um"),Yi=Ui("sp"),Qi=Ui("rtg"),Ji=Ui("rtc");function Zi(t,e=as){ji("ec",t,e)}let $i=!0;function qi(t){const e=en(t),i=t.proxy,n=t.ctx;$i=!1,e.beforeCreate&&Ki(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:h,inject:l,created:c,beforeMount:u,mounted:p,beforeUpdate:f,updated:_,activated:d,deactivated:g,beforeDestroy:y,beforeUnmount:m,destroyed:b,unmounted:v,render:E,renderTracked:T,renderTriggered:P,errorCaptured:O,serverPrefetch:A,expose:R,inheritAttrs:I,components:C,directives:M,filters:w}=e;if(l&&function(t,e,i=$){ot(t)&&(t=on(t));for(const n in t){const i=t[n];pt(i)?e[n]="default"in i?Ri(i.from||n,i.default,!0):Ri(i.from||n):e[n]=Ri(i)}}(l,n,null),o)for(const S in o){const t=o[S];lt(t)&&(n[S]=t.bind(i))}if(s){const e=s.call(i,i);pt(e)&&(t.data=we(e))}if($i=!0,r)for(const S in r){const t=r[S],e=_s({get:lt(t)?t.bind(i,i):lt(t.get)?t.get.bind(i,i):$,set:!lt(t)&&lt(t.set)?t.set.bind(i):$});Object.defineProperty(n,S,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const S in a)tn(a[S],n,i,S);if(h){const t=lt(h)?h.call(i):h;Reflect.ownKeys(t).forEach((e=>{!function(t,e){if(as){let i=as.provides;const n=as.parent&&as.parent.provides;n===i&&(i=as.provides=Object.create(n)),i[t]=e}}(e,t[e])}))}function x(t,e){ot(e)?e.forEach((e=>t(e.bind(i)))):e&&t(e.bind(i))}if(c&&Ki(c,t,"c"),x(Vi,u),x(Hi,p),x(Wi,f),x(Gi,_),x(Di,d),x(ki,g),x(Zi,O),x(Ji,T),x(Qi,P),x(zi,m),x(Xi,v),x(Yi,A),ot(R))if(R.length){const e=t.exposed||(t.exposed=We({}));R.forEach((t=>{e[t]=function(t,e){return Fe(t[e])?t[e]:new Ge(t,e)}(i,t)}))}else t.exposed||(t.exposed=J);E&&t.render===$&&(t.render=E),null!=I&&(t.inheritAttrs=I),C&&(t.components=C),M&&(t.directives=M)}function Ki(t,e,i){Ye(ot(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,i)}function tn(t,e,i,n){const s=n.includes(".")?xi(i,n):()=>i[n];if(ct(t)){const i=e[t];lt(i)&&Ci(s,i)}else if(lt(t))Ci(s,t.bind(i));else if(pt(t))if(ot(t))t.forEach((t=>tn(t,e,i,n)));else{const n=lt(t.handler)?t.handler.bind(i):e[t.handler];lt(n)&&Ci(s,n,t)}}function en(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let h;return a?h=a:s.length||i||n?(h={},s.length&&s.forEach((t=>nn(h,t,o,!0))),nn(h,e,o)):h=e,r.set(e,h),h}function nn(t,e,i,n=!1){const{mixins:s,extends:r}=e;r&&nn(t,r,i,!0),s&&s.forEach((e=>nn(t,e,i,!0)));for(const o in e)if(n&&"expose"===o);else{const n=sn[o]||i&&i[o];t[o]=n?n(t[o],e[o]):e[o]}return t}const sn={data:rn,props:hn,emits:hn,methods:hn,computed:hn,beforeCreate:an,created:an,beforeMount:an,mounted:an,beforeUpdate:an,updated:an,beforeDestroy:an,destroyed:an,activated:an,deactivated:an,errorCaptured:an,serverPrefetch:an,components:hn,directives:hn,watch:hn,provide:rn,inject:function(t,e){return hn(on(t),on(e))}};function rn(t,e){return e?t?function(){return it(lt(t)?t.call(this,this):t,lt(e)?e.call(this,this):e)}:e:t}function on(t){if(ot(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function an(t,e){return t?[...new Set([].concat(t,e))]:e}function hn(t,e){return t?it(it(Object.create(null),t),e):e}function ln(t,e,i,n=!1){const s={},r={};Ct(r,zn,1),t.propsDefaults=Object.create(null),cn(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);i?t.props=n?s:Se(s,!1,ie,Pe,Re):t.type.props?t.props=s:t.props=r,t.attrs=r}function cn(t,e,i,n){const[s,r]=t.propsOptions;let o,a=!1;if(e)for(let h in e){if(mt(h))continue;const l=e[h];let c;s&&rt(s,c=Et(h))?r&&r.includes(c)?(o||(o={}))[c]=l:i[c]=l:mi(t.emitsOptions,h)||l!==n[h]&&(n[h]=l,a=!0)}if(r){const e=ke(i),n=o||J;for(let o=0;o<r.length;o++){const a=r[o];i[a]=un(s,e,a,n[a],t,!rt(n,a))}}return a}function un(t,e,i,n,s,r){const o=t[i];if(null!=o){const t=rt(o,"default");if(t&&void 0===n){const t=o.default;if(o.type!==Function&&lt(t)){const{propsDefaults:r}=s;i in r?n=r[i]:(hs(s),n=r[i]=t.call(null,e),hs(null))}else n=t}o[0]&&(r&&!t?n=!1:!o[1]||""!==n&&n!==Pt(i)||(n=!0))}return n}function pn(t,e,i=!1){const n=e.propsCache,s=n.get(t);if(s)return s;const r=t.props,o={},a=[];let h=!1;if(!lt(t)){const n=t=>{h=!0;const[i,n]=pn(t,e,!0);it(o,i),n&&a.push(...n)};!i&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}if(!r&&!h)return n.set(t,Z),Z;if(ot(r))for(let c=0;c<r.length;c++){const t=Et(r[c]);fn(t)&&(o[t]=J)}else if(r)for(const c in r){const t=Et(c);if(fn(t)){const e=r[c],i=o[t]=ot(e)||lt(e)?{type:e}:e;if(i){const e=gn(Boolean,i.type),n=gn(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||rt(i,"default"))&&a.push(t)}}}const l=[o,a];return n.set(t,l),l}function fn(t){return"$"!==t[0]}function _n(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function dn(t,e){return _n(t)===_n(e)}function gn(t,e){return ot(e)?e.findIndex((e=>dn(e,t))):lt(e)&&dn(e,t)?0:-1}const yn=t=>"_"===t[0]||"$stable"===t,mn=t=>ot(t)?t.map(qn):[qn(t)],bn=(t,e,i)=>{const n=function(t,e=bi,i){if(!e)return t;if(t._n)return t;const n=(...i)=>{n._d&&Vn(-1);const s=Ei(e),r=t(...i);return Ei(s),n._d&&Vn(1),r};return n._n=!0,n._c=!0,n._d=!0,n}((t=>mn(e(t))),i);return n._c=!1,n},vn=(t,e,i)=>{const n=t._ctx;for(const s in t){if(yn(s))continue;const i=t[s];if(lt(i))e[s]=bn(0,i,n);else if(null!=i){const t=mn(i);e[s]=()=>t}}},En=(t,e)=>{const i=mn(e);t.slots.default=()=>i};function Tn(t,e,i,n){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let h=a.dir[n];h&&(Vt(),Ye(h,i,8,[t.el,a,t,e]),Ht())}}function Pn(){return{app:null,config:{isNativeTag:q,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let On=0;function An(t,e){return function(i,n=null){null==n||pt(n)||(n=null);const s=Pn(),r=new Set;let o=!1;const a=s.app={_uid:On++,_component:i,_props:n,_container:null,_context:s,version:ds,get config(){return s.config},set config(t){},use:(t,...e)=>(r.has(t)||(t&&lt(t.install)?(r.add(t),t.install(a,...e)):lt(t)&&(r.add(t),t(a,...e))),a),mixin:t=>(s.mixins.includes(t)||s.mixins.push(t),a),component:(t,e)=>e?(s.components[t]=e,a):s.components[t],directive:(t,e)=>e?(s.directives[t]=e,a):s.directives[t],mount(r,h,l){if(!o){const c=Qn(i,n);return c.appContext=s,h&&e?e(c,r):t(c,r,l),o=!0,a._container=r,r.__vue_app__=a,c.component.proxy}},unmount(){o&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(s.provides[t]=e,a)};return a}}const Rn={scheduler:li,allowRecurse:!0},In=function(t,e){e&&e.pendingBranch?ot(t)?e.effects.push(...t):e.effects.push(t):ui(t,ni,ii,si)},Cn=(t,e,i,n,s=!1)=>{if(ot(t))return void t.forEach(((t,r)=>Cn(t,e&&(ot(e)?e[r]:e),i,n,s)));if(Ni(n)&&!s)return;const r=4&n.shapeFlag?n.component.exposed||n.component.proxy:n.el,o=s?null:r,{i:a,r:h}=t,l=e&&e.r,c=a.refs===J?a.refs={}:a.refs,u=a.setupState;if(null!=l&&l!==h&&(ct(l)?(c[l]=null,rt(u,l)&&(u[l]=null)):Fe(l)&&(l.value=null)),ct(h)){const t=()=>{c[h]=o,rt(u,h)&&(u[h]=o)};o?(t.id=-1,In(t,i)):t()}else if(Fe(h)){const t=()=>{h.value=o};o?(t.id=-1,In(t,i)):t()}else lt(h)&&Xe(h,a,12,[o,c])};function Mn(t){return function(t,e){const{insert:i,remove:n,patchProp:s,forcePatchProp:r,createElement:o,createText:a,createComment:h,setText:l,setElementText:c,parentNode:u,nextSibling:p,setScopeId:f=$,cloneNode:_,insertStaticContent:d}=t,g=(t,e,i,n=null,s=null,r=null,o=!1,a=null,h=!1)=>{t&&!Gn(t,e)&&(n=G(t),j(t,s,r,!0),t=null),-2===e.patchFlag&&(h=!1,e.dynamicChildren=null);const{type:l,ref:c,shapeFlag:u}=e;switch(l){case Ln:y(t,e,i,n);break;case Dn:m(t,e,i,n);break;case kn:null==t&&b(e,i,n,o);break;case Nn:M(t,e,i,n,s,r,o,a,h);break;default:1&u?T(t,e,i,n,s,r,o,a,h):6&u?w(t,e,i,n,s,r,o,a,h):(64&u||128&u)&&l.process(t,e,i,n,s,r,o,a,h,X)}null!=c&&s&&Cn(c,t&&t.ref,r,e||t,!e)},y=(t,e,n,s)=>{if(null==t)i(e.el=a(e.children),n,s);else{const i=e.el=t.el;e.children!==t.children&&l(i,e.children)}},m=(t,e,n,s)=>{null==t?i(e.el=h(e.children||""),n,s):e.el=t.el},b=(t,e,i,n)=>{[t.el,t.anchor]=d(t.children,e,i,n)},v=({el:t,anchor:e},n,s)=>{let r;for(;t&&t!==e;)r=p(t),i(t,n,s),t=r;i(e,n,s)},E=({el:t,anchor:e})=>{let i;for(;t&&t!==e;)i=p(t),n(t),t=i;n(e)},T=(t,e,i,n,s,r,o,a,h)=>{o=o||"svg"===e.type,null==t?P(e,i,n,s,r,o,a,h):R(t,e,s,r,o,a,h)},P=(t,e,n,r,a,h,l,u)=>{let p,f;const{type:d,props:g,shapeFlag:y,transition:m,patchFlag:b,dirs:v}=t;if(t.el&&void 0!==_&&-1===b)p=t.el=_(t.el);else{if(p=t.el=o(t.type,h,g&&g.is,g),8&y?c(p,t.children):16&y&&A(t.children,p,null,r,a,h&&"foreignObject"!==d,l,u||!!t.dynamicChildren),v&&Tn(t,null,r,"created"),g){for(const e in g)mt(e)||s(p,e,null,g[e],h,t.children,r,a,W);(f=g.onVnodeBeforeMount)&&wn(f,r,t)}O(p,t,t.scopeId,l,r)}v&&Tn(t,null,r,"beforeMount");const E=(!a||a&&!a.pendingBranch)&&m&&!m.persisted;E&&m.beforeEnter(p),i(p,e,n),((f=g&&g.onVnodeMounted)||E||v)&&In((()=>{f&&wn(f,r,t),E&&m.enter(p),v&&Tn(t,null,r,"mounted")}),a)},O=(t,e,i,n,s)=>{if(i&&f(t,i),n)for(let r=0;r<n.length;r++)f(t,n[r]);if(s){if(e===s.subTree){const e=s.vnode;O(t,e,e.scopeId,e.slotScopeIds,s.parent)}}},A=(t,e,i,n,s,r,o,a,h=0)=>{for(let l=h;l<t.length;l++){const h=t[l]=a?Kn(t[l]):qn(t[l]);g(null,h,e,i,n,s,r,o,a)}},R=(t,e,i,n,o,a,h)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:p,dirs:f}=e;u|=16&t.patchFlag;const _=t.props||J,d=e.props||J;let g;if((g=d.onVnodeBeforeUpdate)&&wn(g,i,e,t),f&&Tn(e,t,i,"beforeUpdate"),u>0){if(16&u)C(l,e,_,d,i,n,o);else if(2&u&&_.class!==d.class&&s(l,"class",null,d.class,o),4&u&&s(l,"style",_.style,d.style,o),8&u){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const h=a[e],c=_[h],u=d[h];(u!==c||r&&r(l,h))&&s(l,h,c,u,o,t.children,i,n,W)}}1&u&&t.children!==e.children&&c(l,e.children)}else h||null!=p||C(l,e,_,d,i,n,o);const y=o&&"foreignObject"!==e.type;p?I(t.dynamicChildren,p,l,i,n,y,a):h||D(t,e,l,null,i,n,y,a,!1),((g=d.onVnodeUpdated)||f)&&In((()=>{g&&wn(g,i,e,t),f&&Tn(e,t,i,"updated")}),n)},I=(t,e,i,n,s,r,o)=>{for(let a=0;a<e.length;a++){const h=t[a],l=e[a],c=h.el&&(h.type===Nn||!Gn(h,l)||6&h.shapeFlag||64&h.shapeFlag)?u(h.el):i;g(h,l,c,null,n,s,r,o,!0)}},C=(t,e,i,n,o,a,h)=>{if(i!==n){for(const l in n){if(mt(l))continue;const c=n[l],u=i[l];(c!==u||r&&r(t,l))&&s(t,l,u,c,h,e.children,o,a,W)}if(i!==J)for(const r in i)mt(r)||r in n||s(t,r,i[r],null,h,e.children,o,a,W)}},M=(t,e,n,s,r,o,h,l,c)=>{const u=e.el=t?t.el:a(""),p=e.anchor=t?t.anchor:a("");let{patchFlag:f,dynamicChildren:_,slotScopeIds:d}=e;_&&(c=!0),d&&(l=l?l.concat(d):d),null==t?(i(u,n,s),i(p,n,s),A(e.children,n,p,r,o,h,l,c)):f>0&&64&f&&_&&t.dynamicChildren?(I(t.dynamicChildren,_,n,r,o,h,l),(null!=e.key||r&&e===r.subTree)&&xn(t,e,!0)):D(t,e,n,p,r,o,h,l,c)},w=(t,e,i,n,s,r,o,a,h)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?s.ctx.activate(e,i,n,o,h):x(e,i,n,s,r,o,h):S(t,e,h)},x=(t,e,i,n,s,r,o)=>{const a=t.component=function(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||rs,r={uid:os++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pn(n,s),emitsOptions:yi(n,s),emit:null,emitted:null,propsDefaults:J,inheritAttrs:n.inheritAttrs,ctx:J,data:J,props:J,attrs:J,slots:J,refs:J,setupState:J,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=gi.bind(null,r),r}(t,n,s);if(Li(t)&&(a.ctx.renderer=X),function(t,e=!1){cs=e;const{props:i,children:n}=t.vnode,s=ls(t);ln(t,i,s,e),((t,e)=>{if(32&t.vnode.shapeFlag){const i=e._;i?(t.slots=ke(e),Ct(e,"_",i)):vn(e,t.slots={})}else t.slots={},e&&En(t,e);Ct(t.slots,zn,1)})(t,n);const r=s?function(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ns);const{setup:n}=i;if(n){const i=t.setupContext=n.length>1?function(t){const e=e=>{t.exposed=We(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;as=t,Vt();const s=Xe(n,t,0,[t.props,i]);if(Ht(),as=null,ft(s)){if(e)return s.then((e=>{us(t,e)})).catch((e=>{Qe(e,t,0)}));t.asyncDep=s}else us(t,s)}else ps(t)}(t,e):void 0;cs=!1}(a),a.asyncDep){if(s&&s.registerDep(a,N),!t.el){const t=a.subTree=Qn(Dn);m(null,t,e,i)}}else N(a,t,e,i,s,r,o)},S=(t,e,i)=>{const n=e.component=t.component;if(function(t,e,i){const{props:n,children:s,component:r}=t,{props:o,children:a,patchFlag:h}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(i&&h>=0))return!(!s&&!a||a&&a.$stable)||n!==o&&(n?!o||Ai(n,o,l):!!o);if(1024&h)return!0;if(16&h)return n?Ai(n,o,l):!!o;if(8&h){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const i=t[e];if(o[i]!==n[i]&&!mi(l,i))return!0}}return!1}(t,e,i)){if(n.asyncDep&&!n.asyncResolved)return void L(n,e,i);n.next=e,function(t){const e=$e.indexOf(t);e>qe&&$e.splice(e,1)}(n.update),n.update()}else e.component=t.component,e.el=t.el,n.vnode=e},N=(t,e,i,n,s,r,o)=>{t.update=Dt((function(){if(t.isMounted){let e,{next:i,bu:n,u:a,parent:h,vnode:l}=t,c=i;i?(i.el=l.el,L(t,i,o)):i=l,n&&It(n),(e=i.props&&i.props.onVnodeBeforeUpdate)&&wn(e,h,i,l);const p=Ti(t),f=t.subTree;t.subTree=p,g(f,p,u(f.el),G(f),t,s,r),i.el=p.el,null===c&&function({vnode:t,parent:e},i){for(;e&&e.subTree===t;)(t=e.vnode).el=i,e=e.parent}(t,p.el),a&&In(a,s),(e=i.props&&i.props.onVnodeUpdated)&&In((()=>wn(e,h,i,l)),s)}else{let o;const{el:a,props:h}=e,{bm:l,m:c,parent:u}=t;if(l&&It(l),(o=h&&h.onVnodeBeforeMount)&&wn(o,u,e),a&&Q){const i=()=>{t.subTree=Ti(t),Q(a,t.subTree,t,s,null)};Ni(e)?e.type.__asyncLoader().then((()=>!t.isUnmounted&&i())):i()}else{const o=t.subTree=Ti(t);g(null,o,i,n,t,s,r),e.el=o.el}if(c&&In(c,s),o=h&&h.onVnodeMounted){const t=e;In((()=>wn(o,u,t)),s)}256&e.shapeFlag&&t.a&&In(t.a,s),t.isMounted=!0,e=i=n=null}}),Rn)},L=(t,e,i)=>{e.component=t;const n=t.vnode.props;t.vnode=e,t.next=null,function(t,e,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=ke(s),[h]=t.propsOptions;let l=!1;if(!(n||o>0)||16&o){let n;cn(t,e,s,r)&&(l=!0);for(const r in a)e&&(rt(e,r)||(n=Pt(r))!==r&&rt(e,n))||(h?!i||void 0===i[r]&&void 0===i[n]||(s[r]=un(h,a,r,void 0,t,!0)):delete s[r]);if(r!==a)for(const t in r)e&&rt(e,t)||(delete r[t],l=!0)}else if(8&o){const i=t.vnode.dynamicProps;for(let n=0;n<i.length;n++){let o=i[n];const c=e[o];if(h)if(rt(r,o))c!==r[o]&&(r[o]=c,l=!0);else{const e=Et(o);s[e]=un(h,a,e,c,t,!1)}else c!==r[o]&&(r[o]=c,l=!0)}}l&&Gt(t,"set","$attrs")}(t,e.props,n,i),((t,e,i)=>{const{vnode:n,slots:s}=t;let r=!0,o=J;if(32&n.shapeFlag){const t=e._;t?i&&1===t?r=!1:(it(s,e),i||1!==t||delete s._):(r=!e.$stable,vn(e,s)),o=e}else e&&(En(t,e),o={default:1});if(r)for(const a in s)yn(a)||a in o||delete s[a]})(t,e.children,i),Vt(),pi(void 0,t.update),Ht()},D=(t,e,i,n,s,r,o,a,h=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,p=e.children,{patchFlag:f,shapeFlag:_}=e;if(f>0){if(128&f)return void B(l,p,i,n,s,r,o,a,h);if(256&f)return void k(l,p,i,n,s,r,o,a,h)}8&_?(16&u&&W(l,s,r),p!==l&&c(i,p)):16&u?16&_?B(l,p,i,n,s,r,o,a,h):W(l,s,r,!0):(8&u&&c(i,""),16&_&&A(p,i,n,s,r,o,a,h))},k=(t,e,i,n,s,r,o,a,h)=>{e=e||Z;const l=(t=t||Z).length,c=e.length,u=Math.min(l,c);let p;for(p=0;p<u;p++){const n=e[p]=h?Kn(e[p]):qn(e[p]);g(t[p],n,i,null,s,r,o,a,h)}l>c?W(t,s,r,!0,!1,u):A(e,i,n,s,r,o,a,h,u)},B=(t,e,i,n,s,r,o,a,h)=>{let l=0;const c=e.length;let u=t.length-1,p=c-1;for(;l<=u&&l<=p;){const n=t[l],c=e[l]=h?Kn(e[l]):qn(e[l]);if(!Gn(n,c))break;g(n,c,i,null,s,r,o,a,h),l++}for(;l<=u&&l<=p;){const n=t[u],l=e[p]=h?Kn(e[p]):qn(e[p]);if(!Gn(n,l))break;g(n,l,i,null,s,r,o,a,h),u--,p--}if(l>u){if(l<=p){const t=p+1,u=t<c?e[t].el:n;for(;l<=p;)g(null,e[l]=h?Kn(e[l]):qn(e[l]),i,u,s,r,o,a,h),l++}}else if(l>p)for(;l<=u;)j(t[l],s,r,!0),l++;else{const f=l,_=l,d=new Map;for(l=_;l<=p;l++){const t=e[l]=h?Kn(e[l]):qn(e[l]);null!=t.key&&d.set(t.key,l)}let y,m=0;const b=p-_+1;let v=!1,E=0;const T=new Array(b);for(l=0;l<b;l++)T[l]=0;for(l=f;l<=u;l++){const n=t[l];if(m>=b){j(n,s,r,!0);continue}let c;if(null!=n.key)c=d.get(n.key);else for(y=_;y<=p;y++)if(0===T[y-_]&&Gn(n,e[y])){c=y;break}void 0===c?j(n,s,r,!0):(T[c-_]=l+1,c>=E?E=c:v=!0,g(n,e[c],i,null,s,r,o,a,h),m++)}const P=v?function(t){const e=t.slice(),i=[0];let n,s,r,o,a;const h=t.length;for(n=0;n<h;n++){const h=t[n];if(0!==h){if(s=i[i.length-1],t[s]<h){e[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=(r+o)/2|0,t[i[a]]<h?r=a+1:o=a;h<t[i[r]]&&(r>0&&(e[n]=i[r-1]),i[r]=n)}}r=i.length,o=i[r-1];for(;r-- >0;)i[r]=o,o=e[o];return i}(T):Z;for(y=P.length-1,l=b-1;l>=0;l--){const t=_+l,u=e[t],p=t+1<c?e[t+1].el:n;0===T[l]?g(null,u,i,p,s,r,o,a,h):v&&(y<0||l!==P[y]?F(u,i,p,2):y--)}}},F=(t,e,n,s,r=null)=>{const{el:o,type:a,transition:h,children:l,shapeFlag:c}=t;if(6&c)return void F(t.component.subTree,e,n,s);if(128&c)return void t.suspense.move(e,n,s);if(64&c)return void a.move(t,e,n,X);if(a===Nn){i(o,e,n);for(let t=0;t<l.length;t++)F(l[t],e,n,s);return void i(t.anchor,e,n)}if(a===kn)return void v(t,e,n);if(2!==s&&1&c&&h)if(0===s)h.beforeEnter(o),i(o,e,n),In((()=>h.enter(o)),r);else{const{leave:t,delayLeave:s,afterLeave:r}=h,a=()=>i(o,e,n),l=()=>{t(o,(()=>{a(),r&&r()}))};s?s(o,a,l):l()}else i(o,e,n)},j=(t,e,i,n=!1,s=!1)=>{const{type:r,props:o,ref:a,children:h,dynamicChildren:l,shapeFlag:c,patchFlag:u,dirs:p}=t;if(null!=a&&Cn(a,null,i,t,!0),256&c)return void e.ctx.deactivate(t);const f=1&c&&p;let _;if((_=o&&o.onVnodeBeforeUnmount)&&wn(_,e,t),6&c)H(t.component,i,n);else{if(128&c)return void t.suspense.unmount(i,n);f&&Tn(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,i,s,X,n):l&&(r!==Nn||u>0&&64&u)?W(l,e,i,!1,!0):(r===Nn&&(128&u||256&u)||!s&&16&c)&&W(h,e,i),n&&U(t)}((_=o&&o.onVnodeUnmounted)||f)&&In((()=>{_&&wn(_,e,t),f&&Tn(t,null,e,"unmounted")}),i)},U=t=>{const{type:e,el:i,anchor:s,transition:r}=t;if(e===Nn)return void V(i,s);if(e===kn)return void E(t);const o=()=>{n(i),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&t.shapeFlag&&r&&!r.persisted){const{leave:e,delayLeave:n}=r,s=()=>e(i,o);n?n(t.el,o,s):s()}else o()},V=(t,e)=>{let i;for(;t!==e;)i=p(t),n(t),t=i;n(e)},H=(t,e,i)=>{const{bum:n,effects:s,update:r,subTree:o,um:a}=t;if(n&&It(n),s)for(let h=0;h<s.length;h++)kt(s[h]);r&&(kt(r),j(o,t,e,i)),a&&In(a,e),In((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},W=(t,e,i,n=!1,s=!1,r=0)=>{for(let o=r;o<t.length;o++)j(t[o],e,i,n,s)},G=t=>6&t.shapeFlag?G(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),z=(t,e,i)=>{null==t?e._vnode&&j(e._vnode,null,null,!0):g(e._vnode||null,t,e,null,null,null,i),fi(),e._vnode=t},X={p:g,um:j,m:F,r:U,mt:x,mc:A,pc:D,pbc:I,n:G,o:t};let Y,Q;e&&([Y,Q]=e(X));return{render:z,hydrate:Y,createApp:An(z,Y)}}(t)}function wn(t,e,i,n=null){Ye(t,e,7,[i,n])}function xn(t,e,i=!1){const n=t.children,s=e.children;if(ot(n)&&ot(s))for(let r=0;r<n.length;r++){const t=n[r];let e=s[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[r]=Kn(s[r]),e.el=t.el),i||xn(t,e))}}const Sn=Symbol(),Nn=Symbol(void 0),Ln=Symbol(void 0),Dn=Symbol(void 0),kn=Symbol(void 0),Bn=[];let Fn=null;function jn(t=!1){Bn.push(Fn=t?null:[])}let Un=1;function Vn(t){Un+=t}function Hn(t,e,i,n,s){const r=Qn(t,e,i,n,s,!0);return r.dynamicChildren=Un>0?Fn||Z:null,Bn.pop(),Fn=Bn[Bn.length-1]||null,Un>0&&Fn&&Fn.push(r),r}function Wn(t){return!!t&&!0===t.__v_isVNode}function Gn(t,e){return t.type===e.type&&t.key===e.key}const zn="__vInternal",Xn=({key:t})=>null!=t?t:null,Yn=({ref:t})=>null!=t?ct(t)||Fe(t)||lt(t)?{i:bi,r:t}:t:null,Qn=function(t,e=null,i=null,n=0,s=null,r=!1){t&&t!==Sn||(t=Dn);if(Wn(t)){const n=Jn(t,e,!0);return i&&ts(n,i),n}o=t,lt(o)&&"__vccOpts"in o&&(t=t.__vccOpts);var o;if(e){(De(e)||zn in e)&&(e=it({},e));let{class:t,style:i}=e;t&&!ct(t)&&(e.class=X(t)),pt(i)&&(De(i)&&!ot(i)&&(i=it({},i)),e.style=H(i))}const a=ct(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:pt(t)?4:lt(t)?2:0,h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xn(e),ref:e&&Yn(e),scopeId:vi,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null};ts(h,i),128&a&&t.normalize(h);Un>0&&!r&&Fn&&(n>0||6&a)&&32!==n&&Fn.push(h);return h};function Jn(t,e,i=!1){const{props:n,ref:s,patchFlag:r,children:o}=t,a=e?function(...t){const e=it({},t[0]);for(let i=1;i<t.length;i++){const n=t[i];for(const t in n)if("class"===t)e.class!==n.class&&(e.class=X([e.class,n.class]));else if("style"===t)e.style=H([e.style,n.style]);else if(tt(t)){const i=e[t],s=n[t];i!==s&&(e[t]=i?[].concat(i,s):s)}else""!==t&&(e[t]=n[t])}return e}(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Xn(a),ref:e&&e.ref?i&&s?ot(s)?s.concat(Yn(e)):[s,Yn(e)]:Yn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Nn?-1===r?16:16|r:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jn(t.ssContent),ssFallback:t.ssFallback&&Jn(t.ssFallback),el:t.el,anchor:t.anchor}}function Zn(t=" ",e=0){return Qn(Ln,null,t,e)}function $n(t="",e=!1){return e?(jn(),Hn(Dn,null,t)):Qn(Dn,null,t)}function qn(t){return null==t||"boolean"==typeof t?Qn(Dn):ot(t)?Qn(Nn,null,t.slice()):"object"==typeof t?Kn(t):Qn(Ln,null,String(t))}function Kn(t){return null===t.el?t:Jn(t)}function ts(t,e){let i=0;const{shapeFlag:n}=t;if(null==e)e=null;else if(ot(e))i=16;else if("object"==typeof e){if(1&n||64&n){const i=e.default;return void(i&&(i._c&&(i._d=!1),ts(t,i()),i._c&&(i._d=!0)))}{i=32;const n=e._;n||zn in e?3===n&&bi&&(1===bi.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=bi}}else lt(e)?(e={default:e,_ctx:bi},i=32):(e=String(e),64&n?(i=16,e=[Zn(e)]):i=8);t.children=e,t.shapeFlag|=i}const es=t=>t?ls(t)?t.exposed?t.exposed:t.proxy:es(t.parent):null,is=it(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>es(t.parent),$root:t=>es(t.root),$emit:t=>t.emit,$options:t=>en(t),$forceUpdate:t=>()=>li(t.update),$nextTick:t=>hi.bind(t.proxy),$watch:t=>wi.bind(t)}),ns={get({_:t},e){const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:h}=t;if("__v_skip"===e)return!0;let l;if("$"!==e[0]){const a=o[e];if(void 0!==a)switch(a){case 0:return n[e];case 1:return s[e];case 3:return i[e];case 2:return r[e]}else{if(n!==J&&rt(n,e))return o[e]=0,n[e];if(s!==J&&rt(s,e))return o[e]=1,s[e];if((l=t.propsOptions[0])&&rt(l,e))return o[e]=2,r[e];if(i!==J&&rt(i,e))return o[e]=3,i[e];$i&&(o[e]=4)}}const c=is[e];let u,p;return c?("$attrs"===e&&Wt(t,0,e),c(t)):(u=a.__cssModules)&&(u=u[e])?u:i!==J&&rt(i,e)?(o[e]=3,i[e]):(p=h.config.globalProperties,rt(p,e)?p[e]:void 0)},set({_:t},e,i){const{data:n,setupState:s,ctx:r}=t;if(s!==J&&rt(s,e))s[e]=i;else if(n!==J&&rt(n,e))n[e]=i;else if(rt(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return void 0!==i[o]||t!==J&&rt(t,o)||e!==J&&rt(e,o)||(a=r[0])&&rt(a,o)||rt(n,o)||rt(is,o)||rt(s.config.globalProperties,o)}},ss=it({},ns,{get(t,e){if(e!==Symbol.unscopables)return ns.get(t,e,t)},has:(t,e)=>"_"!==e[0]&&!U(e)}),rs=Pn();let os=0;let as=null;const hs=t=>{as=t};function ls(t){return 4&t.vnode.shapeFlag}let cs=!1;function us(t,e,i){lt(e)?t.render=e:pt(e)&&(t.setupState=We(e)),ps(t)}function ps(t,e,i){const n=t.type;t.render||(t.render=n.render||$,t.render._rc&&(t.withProxy=new Proxy(t.ctx,ss))),as=t,Vt(),qi(t),Ht(),as=null}function fs(t,e=as){e&&(e.effects||(e.effects=[])).push(t)}function _s(t){const e=function(t){let e,i;return lt(t)?(e=t,i=$):(e=t.get,i=t.set),new ze(e,i,lt(t)||!t.set)}(t);return fs(e.effect),e}const ds="3.1.1",gs="http://www.w3.org/2000/svg",ys="undefined"!=typeof document?document:null;let ms,bs;const vs={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e?ys.createElementNS(gs,t):ys.createElement(t,i?{is:i}:void 0);return"select"===t&&n&&null!=n.multiple&&s.setAttribute("multiple",n.multiple),s},createText:t=>ys.createTextNode(t),createComment:t=>ys.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ys.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,n){const s=n?bs||(bs=ys.createElementNS(gs,"svg")):ms||(ms=ys.createElement("div"));s.innerHTML=t;const r=s.firstChild;let o=r,a=o;for(;o;)a=o,vs.insert(o,e,i),o=s.firstChild;return[r,a]}};const Es=/\s*!important$/;function Ts(t,e,i){if(ot(i))i.forEach((i=>Ts(t,e,i)));else if(e.startsWith("--"))t.setProperty(e,i);else{const n=function(t,e){const i=Os[e];if(i)return i;let n=Et(e);if("filter"!==n&&n in t)return Os[e]=n;n=Ot(n);for(let s=0;s<Ps.length;s++){const i=Ps[s]+n;if(i in t)return Os[e]=i}return e}(t,e);Es.test(i)?t.setProperty(Pt(n),i.replace(Es,""),"important"):t[n]=i}}const Ps=["Webkit","Moz","ms"],Os={};const As="http://www.w3.org/1999/xlink";let Rs=Date.now,Is=!1;if("undefined"!=typeof window){Rs()>document.createEvent("Event").timeStamp&&(Rs=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Is=!!(t&&Number(t[1])<=53)}let Cs=0;const Ms=Promise.resolve(),ws=()=>{Cs=0};function xs(t,e,i,n,s=null){const r=t._vei||(t._vei={}),o=r[e];if(n&&o)o.value=n;else{const[i,a]=function(t){let e;if(Ss.test(t)){let i;for(e={};i=t.match(Ss);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[Pt(t.slice(2)),e]}(e);if(n){!function(t,e,i,n){t.addEventListener(e,i,n)}(t,i,r[e]=function(t,e){const i=t=>{const n=t.timeStamp||Rs();(Is||n>=i.attached-1)&&Ye(function(t,e){if(ot(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,i.value),e,5,[t])};return i.value=t,i.attached=(()=>Cs||(Ms.then(ws),Cs=Rs()))(),i}(n,s),a)}else o&&(!function(t,e,i,n){t.removeEventListener(e,i,n)}(t,i,o,a),r[e]=void 0)}}const Ss=/(?:Once|Passive|Capture)$/;const Ns=/^on[a-z]/;const Ls=it({patchProp:(t,e,i,n,s=!1,r,o,a,h)=>{switch(e){case"class":!function(t,e,i){if(null==e&&(e=""),i)t.setAttribute("class",e);else{const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),t.className=e}}(t,n,s);break;case"style":!function(t,e,i){const n=t.style;if(i)if(ct(i)){if(e!==i){const e=n.display;n.cssText=i,"_vod"in t&&(n.display=e)}}else{for(const t in i)Ts(n,t,i[t]);if(e&&!ct(e))for(const t in e)null==i[t]&&Ts(n,t,"")}else t.removeAttribute("style")}(t,i,n);break;default:tt(e)?et(e)||xs(t,e,0,n,o):function(t,e,i,n){if(n)return"innerHTML"===e||!!(e in t&&Ns.test(e)&&lt(i));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(Ns.test(e)&&ct(i))return!1;return e in t}(t,e,n,s)?function(t,e,i,n,s,r,o){if("innerHTML"===e||"textContent"===e)return n&&o(n,s,r),void(t[e]=null==i?"":i);if("value"===e&&"PROGRESS"!==t.tagName){t._value=i;const n=null==i?"":i;return t.value!==n&&(t.value=n),void(null==i&&t.removeAttribute(e))}if(""===i||null==i){const n=typeof t[e];if(""===i&&"boolean"===n)return void(t[e]=!0);if(null==i&&"string"===n)return t[e]="",void t.removeAttribute(e);if("number"===n)return t[e]=0,void t.removeAttribute(e)}try{t[e]=i}catch(a){}}(t,e,n,r,o,a,h):("true-value"===e?t._trueValue=n:"false-value"===e&&(t._falseValue=n),function(t,e,i,n,s){if(n&&e.startsWith("xlink:"))null==i?t.removeAttributeNS(As,e.slice(6,e.length)):t.setAttributeNS(As,e,i);else{const n=V(e);null==i||n&&!1===i?t.removeAttribute(e):t.setAttribute(e,n?"":i)}}(t,e,n,s))}},forcePatchProp:(t,e)=>"value"===e},vs);let Ds;var ks=function(){function i(e,n){if(void 0===n&&(n=i.DefaultPluginFactory()),this._physicsPlugin=n,this._impostors=[],this._joints=[],this._subTimeStep=0,!this._physicsPlugin.isSupported())throw new Error("Physics Engine "+this._physicsPlugin.name+" cannot be found. Please make sure it is included.");e=e||new t(0,-9.807,0),this.setGravity(e),this.setTimeStep()}return i.DefaultPluginFactory=function(){throw e.WarnImport("CannonJSPlugin")},i.prototype.setGravity=function(t){this.gravity=t,this._physicsPlugin.setGravity(this.gravity)},i.prototype.setTimeStep=function(t){void 0===t&&(t=1/60),this._physicsPlugin.setTimeStep(t)},i.prototype.getTimeStep=function(){return this._physicsPlugin.getTimeStep()},i.prototype.setSubTimeStep=function(t){void 0===t&&(t=0),this._subTimeStep=t},i.prototype.getSubTimeStep=function(){return this._subTimeStep},i.prototype.dispose=function(){this._impostors.forEach((function(t){t.dispose()})),this._physicsPlugin.dispose()},i.prototype.getPhysicsPluginName=function(){return this._physicsPlugin.name},i.prototype.addImpostor=function(t){t.uniqueId=this._impostors.push(t),t.parent||this._physicsPlugin.generatePhysicsBody(t)},i.prototype.removeImpostor=function(t){var e=this._impostors.indexOf(t);e>-1&&(this._impostors.splice(e,1).length&&this.getPhysicsPlugin().removePhysicsBody(t))},i.prototype.addJoint=function(t,e,i){var n={mainImpostor:t,connectedImpostor:e,joint:i};i.physicsPlugin=this._physicsPlugin,this._joints.push(n),this._physicsPlugin.generateJoint(n)},i.prototype.removeJoint=function(t,e,i){var n=this._joints.filter((function(n){return n.connectedImpostor===e&&n.joint===i&&n.mainImpostor===t}));n.length&&this._physicsPlugin.removeJoint(n[0])},i.prototype._step=function(t){var e=this;this._impostors.forEach((function(t){t.isBodyInitRequired()&&e._physicsPlugin.generatePhysicsBody(t)})),t>.1?t=.1:t<=0&&(t=1/60),this._physicsPlugin.executeStep(t,this._impostors)},i.prototype.getPhysicsPlugin=function(){return this._physicsPlugin},i.prototype.getImpostors=function(){return this._impostors},i.prototype.getImpostorForPhysicsObject=function(t){for(var e=0;e<this._impostors.length;++e)if(this._impostors[e].object===t)return this._impostors[e];return null},i.prototype.getImpostorWithPhysicsBody=function(t){for(var e=0;e<this._impostors.length;++e)if(this._impostors[e].physicsBody===t)return this._impostors[e];return null},i.prototype.raycast=function(t,e){return this._physicsPlugin.raycast(t,e)},i.Epsilon=.001,i}(),Bs=function(){function t(t,e){this.type=t,this.jointData=e,e.nativeParams=e.nativeParams||{}}return Object.defineProperty(t.prototype,"physicsJoint",{get:function(){return this._physicsJoint},set:function(t){this._physicsJoint,this._physicsJoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"physicsPlugin",{set:function(t){this._physicsPlugin=t},enumerable:!1,configurable:!0}),t.prototype.executeNativeFunction=function(t){t(this._physicsPlugin.world,this._physicsJoint)},t.DistanceJoint=0,t.HingeJoint=1,t.BallAndSocketJoint=2,t.WheelJoint=3,t.SliderJoint=4,t.PrismaticJoint=5,t.UniversalJoint=6,t.Hinge2Joint=t.WheelJoint,t.PointToPointJoint=8,t.SpringJoint=9,t.LockJoint=10,t}();!function(t){function e(e){return t.call(this,Bs.DistanceJoint,e)||this}i(e,t),e.prototype.updateDistance=function(t,e){this._physicsPlugin.updateDistanceJoint(this,t,e)}}(Bs);var Fs=function(t){function e(e,i){return t.call(this,e,i)||this}return i(e,t),e.prototype.setMotor=function(t,e){this._physicsPlugin.setMotor(this,t||0,e)},e.prototype.setLimit=function(t,e){this._physicsPlugin.setLimit(this,t,e)},e}(Bs);!function(t){function e(e){return t.call(this,Bs.HingeJoint,e)||this}i(e,t),e.prototype.setMotor=function(t,e){this._physicsPlugin.setMotor(this,t||0,e)},e.prototype.setLimit=function(t,e){this._physicsPlugin.setLimit(this,t,e)}}(Fs),function(t){function e(e){return t.call(this,Bs.Hinge2Joint,e)||this}i(e,t),e.prototype.setMotor=function(t,e,i){void 0===i&&(i=0),this._physicsPlugin.setMotor(this,t||0,e,i)},e.prototype.setLimit=function(t,e,i){void 0===i&&(i=0),this._physicsPlugin.setLimit(this,t,e,i)}}(Fs),n.prototype.getPhysicsEngine=function(){return this._physicsEngine},n.prototype.enablePhysics=function(t,e){if(void 0===t&&(t=null),this._physicsEngine)return!0;var i=this._getComponent(s.NAME_PHYSICSENGINE);i||(i=new js(this),this._addComponent(i));try{return this._physicsEngine=new ks(t,e),this._physicsTimeAccumulator=0,!0}catch(n){return r.Error(n.message),!1}},n.prototype.disablePhysicsEngine=function(){this._physicsEngine&&(this._physicsEngine.dispose(),this._physicsEngine=null)},n.prototype.isPhysicsEnabled=function(){return void 0!==this._physicsEngine},n.prototype.deleteCompoundImpostor=function(t){var e=t.parts[0].mesh;e.physicsImpostor&&(e.physicsImpostor.dispose(),e.physicsImpostor=null)},n.prototype._advancePhysicsEngineStep=function(t){if(this._physicsEngine){var e=this._physicsEngine.getSubTimeStep();if(e>0)for(this._physicsTimeAccumulator+=t;this._physicsTimeAccumulator>e;)this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(e/1e3),this.onAfterPhysicsObservable.notifyObservers(this),this._physicsTimeAccumulator-=e;else this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(t/1e3),this.onAfterPhysicsObservable.notifyObservers(this)}},Object.defineProperty(o.prototype,"physicsImpostor",{get:function(){return this._physicsImpostor},set:function(t){var e=this;this._physicsImpostor!==t&&(this._disposePhysicsObserver&&this.onDisposeObservable.remove(this._disposePhysicsObserver),this._physicsImpostor=t,t&&(this._disposePhysicsObserver=this.onDisposeObservable.add((function(){e.physicsImpostor&&(e.physicsImpostor.dispose(),e.physicsImpostor=null)}))))},enumerable:!0,configurable:!0}),o.prototype.getPhysicsImpostor=function(){return this.physicsImpostor},o.prototype.applyImpulse=function(t,e){return this.physicsImpostor?(this.physicsImpostor.applyImpulse(t,e),this):this},o.prototype.setPhysicsLinkWith=function(t,e,i,n){return this.physicsImpostor&&t.physicsImpostor?(this.physicsImpostor.createJoint(t.physicsImpostor,Bs.HingeJoint,{mainPivot:e,connectedPivot:i,nativeParams:n}),this):this};var js=function(){function t(t){var e=this;this.name=s.NAME_PHYSICSENGINE,this.scene=t,this.scene.onBeforePhysicsObservable=new a,this.scene.onAfterPhysicsObservable=new a,this.scene.getDeterministicFrameTime=function(){return e.scene._physicsEngine?1e3*e.scene._physicsEngine.getTimeStep():1e3/60}}return t.prototype.register=function(){},t.prototype.rebuild=function(){},t.prototype.dispose=function(){this.scene.onBeforePhysicsObservable.clear(),this.scene.onAfterPhysicsObservable.clear(),this.scene._physicsEngine&&this.scene.disablePhysicsEngine()},t}();h._PhysicsImpostorParser=function(t,e,i){return new Us(e,i.physicsImpostor,{mass:i.physicsMass,friction:i.physicsFriction,restitution:i.physicsRestitution},t)};var Us=function(){function e(e,i,n,s){var o=this;void 0===n&&(n={mass:0}),this.object=e,this.type=i,this._options=n,this._scene=s,this._pluginData={},this._bodyUpdateRequired=!1,this._onBeforePhysicsStepCallbacks=new Array,this._onAfterPhysicsStepCallbacks=new Array,this._onPhysicsCollideCallbacks=[],this._deltaPosition=t.Zero(),this._isDisposed=!1,this.soft=!1,this.segments=0,this._tmpQuat=new l,this._tmpQuat2=new l,this.beforeStep=function(){o._physicsEngine&&(o.object.translate(o._deltaPosition,-1),o._deltaRotationConjugated&&o.object.rotationQuaternion&&o.object.rotationQuaternion.multiplyToRef(o._deltaRotationConjugated,o.object.rotationQuaternion),o.object.computeWorldMatrix(!1),o.object.parent&&o.object.rotationQuaternion?(o.getParentsRotation(),o._tmpQuat.multiplyToRef(o.object.rotationQuaternion,o._tmpQuat)):o._tmpQuat.copyFrom(o.object.rotationQuaternion||new l),o._options.disableBidirectionalTransformation||o.object.rotationQuaternion&&o._physicsEngine.getPhysicsPlugin().setPhysicsBodyTransformation(o,o.object.getAbsolutePosition(),o._tmpQuat),o._onBeforePhysicsStepCallbacks.forEach((function(t){t(o)})))},this.afterStep=function(){o._physicsEngine&&(o._onAfterPhysicsStepCallbacks.forEach((function(t){t(o)})),o._physicsEngine.getPhysicsPlugin().setTransformationFromPhysicsBody(o),o.object.parent&&o.object.rotationQuaternion&&(o.getParentsRotation(),o._tmpQuat.conjugateInPlace(),o._tmpQuat.multiplyToRef(o.object.rotationQuaternion,o.object.rotationQuaternion)),o.object.setAbsolutePosition(o.object.position),o._deltaRotation&&o.object.rotationQuaternion&&o.object.rotationQuaternion.multiplyToRef(o._deltaRotation,o.object.rotationQuaternion),o.object.translate(o._deltaPosition,1))},this.onCollideEvent=null,this.onCollide=function(t){if((o._onPhysicsCollideCallbacks.length||o.onCollideEvent)&&o._physicsEngine){var e=o._physicsEngine.getImpostorWithPhysicsBody(t.body);e&&(o.onCollideEvent&&o.onCollideEvent(o,e),o._onPhysicsCollideCallbacks.filter((function(t){return-1!==t.otherImpostors.indexOf(e)})).forEach((function(i){i.callback(o,e,t.point)})))}},this.object?(this.object.parent&&0!==n.mass&&r.Warn("A physics impostor has been created for an object which has a parent. Babylon physics currently works in local space so unexpected issues may occur."),!this._scene&&e.getScene&&(this._scene=e.getScene()),this._scene&&(this.type>100&&(this.soft=!0),this._physicsEngine=this._scene.getPhysicsEngine(),this._physicsEngine?(this.object.rotationQuaternion||(this.object.rotation?this.object.rotationQuaternion=l.RotationYawPitchRoll(this.object.rotation.y,this.object.rotation.x,this.object.rotation.z):this.object.rotationQuaternion=new l),this._options.mass=void 0===n.mass?0:n.mass,this._options.friction=void 0===n.friction?.2:n.friction,this._options.restitution=void 0===n.restitution?.2:n.restitution,this.soft&&(this._options.mass=this._options.mass>0?this._options.mass:1,this._options.pressure=void 0===n.pressure?200:n.pressure,this._options.stiffness=void 0===n.stiffness?1:n.stiffness,this._options.velocityIterations=void 0===n.velocityIterations?20:n.velocityIterations,this._options.positionIterations=void 0===n.positionIterations?20:n.positionIterations,this._options.fixedPoints=void 0===n.fixedPoints?0:n.fixedPoints,this._options.margin=void 0===n.margin?0:n.margin,this._options.damping=void 0===n.damping?0:n.damping,this._options.path=void 0===n.path?null:n.path,this._options.shape=void 0===n.shape?null:n.shape),this._joints=[],!this.object.parent||this._options.ignoreParent?this._init():this.object.parent.physicsImpostor&&r.Warn("You must affect impostors to children before affecting impostor to parent.")):r.Error("Physics not enabled. Please use scene.enablePhysics(...) before creating impostors."))):r.Error("No object was provided. A physics object is obligatory")}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mass",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyMass(this):0},set:function(t){this.setMass(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friction",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyFriction(this):0},set:function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyFriction(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"restitution",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyRestitution(this):0},set:function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyRestitution(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pressure",{get:function(){if(!this._physicsEngine)return 0;var t=this._physicsEngine.getPhysicsPlugin();return t.setBodyPressure?t.getBodyPressure(this):0},set:function(t){if(this._physicsEngine){var e=this._physicsEngine.getPhysicsPlugin();e.setBodyPressure&&e.setBodyPressure(this,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stiffness",{get:function(){if(!this._physicsEngine)return 0;var t=this._physicsEngine.getPhysicsPlugin();return t.getBodyStiffness?t.getBodyStiffness(this):0},set:function(t){if(this._physicsEngine){var e=this._physicsEngine.getPhysicsPlugin();e.setBodyStiffness&&e.setBodyStiffness(this,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"velocityIterations",{get:function(){if(!this._physicsEngine)return 0;var t=this._physicsEngine.getPhysicsPlugin();return t.getBodyVelocityIterations?t.getBodyVelocityIterations(this):0},set:function(t){if(this._physicsEngine){var e=this._physicsEngine.getPhysicsPlugin();e.setBodyVelocityIterations&&e.setBodyVelocityIterations(this,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionIterations",{get:function(){if(!this._physicsEngine)return 0;var t=this._physicsEngine.getPhysicsPlugin();return t.getBodyPositionIterations?t.getBodyPositionIterations(this):0},set:function(t){if(this._physicsEngine){var e=this._physicsEngine.getPhysicsPlugin();e.setBodyPositionIterations&&e.setBodyPositionIterations(this,t)}},enumerable:!1,configurable:!0}),e.prototype._init=function(){this._physicsEngine&&(this._physicsEngine.removeImpostor(this),this.physicsBody=null,this._parent=this._parent||this._getPhysicsParent(),this._isDisposed||this.parent&&!this._options.ignoreParent||this._physicsEngine.addImpostor(this))},e.prototype._getPhysicsParent=function(){return this.object.parent instanceof o?this.object.parent.physicsImpostor:null},e.prototype.isBodyInitRequired=function(){return this._bodyUpdateRequired||!this._physicsBody&&!this._parent},e.prototype.setScalingUpdated=function(){this.forceUpdate()},e.prototype.forceUpdate=function(){this._init(),this.parent&&!this._options.ignoreParent&&this.parent.forceUpdate()},Object.defineProperty(e.prototype,"physicsBody",{get:function(){return this._parent&&!this._options.ignoreParent?this._parent.physicsBody:this._physicsBody},set:function(t){this._physicsBody&&this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().removePhysicsBody(this),this._physicsBody=t,this.resetUpdateFlags()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return!this._options.ignoreParent&&this._parent?this._parent:null},set:function(t){this._parent=t},enumerable:!1,configurable:!0}),e.prototype.resetUpdateFlags=function(){this._bodyUpdateRequired=!1},e.prototype.getObjectExtendSize=function(){if(this.object.getBoundingInfo){var t=this.object.rotationQuaternion,i=this.object.scaling.clone();this.object.rotationQuaternion=e.IDENTITY_QUATERNION;var n=this.object.computeWorldMatrix&&this.object.computeWorldMatrix(!0);n&&n.decompose(i,void 0,void 0);var s=this.object.getBoundingInfo().boundingBox.extendSize.scale(2).multiplyInPlace(i);return this.object.rotationQuaternion=t,this.object.computeWorldMatrix&&this.object.computeWorldMatrix(!0),s}return e.DEFAULT_OBJECT_SIZE},e.prototype.getObjectCenter=function(){return this.object.getBoundingInfo?this.object.getBoundingInfo().boundingBox.centerWorld:this.object.position},e.prototype.getParam=function(t){return this._options[t]},e.prototype.setParam=function(t,e){this._options[t]=e,this._bodyUpdateRequired=!0},e.prototype.setMass=function(t){this.getParam("mass")!==t&&this.setParam("mass",t),this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyMass(this,t)},e.prototype.getLinearVelocity=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getLinearVelocity(this):t.Zero()},e.prototype.setLinearVelocity=function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setLinearVelocity(this,t)},e.prototype.getAngularVelocity=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getAngularVelocity(this):t.Zero()},e.prototype.setAngularVelocity=function(t){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setAngularVelocity(this,t)},e.prototype.executeNativeFunction=function(t){this._physicsEngine&&t(this._physicsEngine.getPhysicsPlugin().world,this.physicsBody)},e.prototype.registerBeforePhysicsStep=function(t){this._onBeforePhysicsStepCallbacks.push(t)},e.prototype.unregisterBeforePhysicsStep=function(t){var e=this._onBeforePhysicsStepCallbacks.indexOf(t);e>-1?this._onBeforePhysicsStepCallbacks.splice(e,1):r.Warn("Function to remove was not found")},e.prototype.registerAfterPhysicsStep=function(t){this._onAfterPhysicsStepCallbacks.push(t)},e.prototype.unregisterAfterPhysicsStep=function(t){var e=this._onAfterPhysicsStepCallbacks.indexOf(t);e>-1?this._onAfterPhysicsStepCallbacks.splice(e,1):r.Warn("Function to remove was not found")},e.prototype.registerOnPhysicsCollide=function(t,e){var i=t instanceof Array?t:[t];this._onPhysicsCollideCallbacks.push({callback:e,otherImpostors:i})},e.prototype.unregisterOnPhysicsCollide=function(t,e){var i=t instanceof Array?t:[t],n=-1;this._onPhysicsCollideCallbacks.some((function(t,s){if(t.callback===e&&t.otherImpostors.length===i.length){var r=t.otherImpostors.every((function(t){return i.indexOf(t)>-1}));return r&&(n=s),r}return!1}))?this._onPhysicsCollideCallbacks.splice(n,1):r.Warn("Function to remove was not found")},e.prototype.getParentsRotation=function(){var t=this.object.parent;for(this._tmpQuat.copyFromFloats(0,0,0,1);t;)t.rotationQuaternion?this._tmpQuat2.copyFrom(t.rotationQuaternion):l.RotationYawPitchRollToRef(t.rotation.y,t.rotation.x,t.rotation.z,this._tmpQuat2),this._tmpQuat.multiplyToRef(this._tmpQuat2,this._tmpQuat),t=t.parent;return this._tmpQuat},e.prototype.applyForce=function(t,e){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().applyForce(this,t,e),this},e.prototype.applyImpulse=function(t,e){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().applyImpulse(this,t,e),this},e.prototype.createJoint=function(t,e,i){var n=new Bs(e,i);return this.addJoint(t,n),this},e.prototype.addJoint=function(t,e){return this._joints.push({otherImpostor:t,joint:e}),this._physicsEngine&&this._physicsEngine.addJoint(this,t,e),this},e.prototype.addAnchor=function(t,e,i,n,s){if(!this._physicsEngine)return this;var r=this._physicsEngine.getPhysicsPlugin();return r.appendAnchor?(this._physicsEngine&&r.appendAnchor(this,t,e,i,n,s),this):this},e.prototype.addHook=function(t,e,i,n){if(!this._physicsEngine)return this;var s=this._physicsEngine.getPhysicsPlugin();return s.appendAnchor?(this._physicsEngine&&s.appendHook(this,t,e,i,n),this):this},e.prototype.sleep=function(){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().sleepBody(this),this},e.prototype.wakeUp=function(){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().wakeUpBody(this),this},e.prototype.clone=function(t){return t?new e(t,this.type,this._options,this._scene):null},e.prototype.dispose=function(){var t=this;this._physicsEngine&&(this._joints.forEach((function(e){t._physicsEngine&&t._physicsEngine.removeJoint(t,e.otherImpostor,e.joint)})),this._physicsEngine.removeImpostor(this),this.parent&&this.parent.forceUpdate(),this._isDisposed=!0)},e.prototype.setDeltaPosition=function(t){this._deltaPosition.copyFrom(t)},e.prototype.setDeltaRotation=function(t){this._deltaRotation||(this._deltaRotation=new l),this._deltaRotation.copyFrom(t),this._deltaRotationConjugated=this._deltaRotation.conjugate()},e.prototype.getBoxSizeToRef=function(t){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().getBoxSizeToRef(this,t),this},e.prototype.getRadius=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getRadius(this):0},e.prototype.syncBoneWithImpostor=function(t,i,n,s,r){var o=e._tmpVecs[0],a=this.object;if(a.rotationQuaternion)if(r){var h=e._tmpQuat;a.rotationQuaternion.multiplyToRef(r,h),t.setRotationQuaternion(h,c.WORLD,i)}else t.setRotationQuaternion(a.rotationQuaternion,c.WORLD,i);o.x=0,o.y=0,o.z=0,n&&(o.x=n.x,o.y=n.y,o.z=n.z,t.getDirectionToRef(o,i,o),null==s&&(s=n.length()),o.x*=s,o.y*=s,o.z*=s),t.getParent()?(o.addInPlace(a.getAbsolutePosition()),t.setAbsolutePosition(o,i)):(i.setAbsolutePosition(a.getAbsolutePosition()),i.position.x-=o.x,i.position.y-=o.y,i.position.z-=o.z)},e.prototype.syncImpostorWithBone=function(t,i,n,s,r,o){var a=this.object;if(a.rotationQuaternion)if(r){var h=e._tmpQuat;t.getRotationQuaternionToRef(c.WORLD,i,h),h.multiplyToRef(r,a.rotationQuaternion)}else t.getRotationQuaternionToRef(c.WORLD,i,a.rotationQuaternion);var l=e._tmpVecs[0],u=e._tmpVecs[1];o||((o=e._tmpVecs[2]).x=0,o.y=1,o.z=0),t.getDirectionToRef(o,i,u),t.getAbsolutePositionToRef(i,l),null==s&&n&&(s=n.length()),null!=s&&(l.x+=u.x*s,l.y+=u.y*s,l.z+=u.z*s),a.setAbsolutePosition(l)},e.DEFAULT_OBJECT_SIZE=new t(1,1,1),e.IDENTITY_QUATERNION=l.Identity(),e._tmpVecs=u.BuildArray(3,t.Zero),e._tmpQuat=l.Identity(),e.NoImpostor=0,e.SphereImpostor=1,e.BoxImpostor=2,e.PlaneImpostor=3,e.MeshImpostor=4,e.CapsuleImpostor=6,e.CylinderImpostor=7,e.ParticleImpostor=8,e.HeightmapImpostor=9,e.ConvexHullImpostor=10,e.CustomImpostor=100,e.RopeImpostor=101,e.ClothImpostor=102,e.SoftbodyImpostor=103,e}(),Vs=function(){function t(){}return t.COPY=1,t.CUT=2,t.PASTE=3,t}(),Hs=function(){function t(t,e){this.type=t,this.event=e}return t.GetTypeFromCharacter=function(t){switch(t){case 67:return Vs.COPY;case 86:return Vs.PASTE;case 88:return Vs.CUT;default:return-1}},t}(),Ws=function(){function t(t){this.name=s.NAME_LAYER,this.scene=t,this._engine=t.getEngine(),t.layers=new Array}return t.prototype.register=function(){this.scene._beforeCameraDrawStage.registerStep(s.STEP_BEFORECAMERADRAW_LAYER,this,this._drawCameraBackground),this.scene._afterCameraDrawStage.registerStep(s.STEP_AFTERCAMERADRAW_LAYER,this,this._drawCameraForeground),this.scene._beforeRenderTargetDrawStage.registerStep(s.STEP_BEFORERENDERTARGETDRAW_LAYER,this,this._drawRenderTargetBackground),this.scene._afterRenderTargetDrawStage.registerStep(s.STEP_AFTERRENDERTARGETDRAW_LAYER,this,this._drawRenderTargetForeground)},t.prototype.rebuild=function(){for(var t=0,e=this.scene.layers;t<e.length;t++){e[t]._rebuild()}},t.prototype.dispose=function(){for(var t=this.scene.layers;t.length;)t[0].dispose()},t.prototype._draw=function(t){var e=this.scene.layers;if(e.length){this._engine.setDepthBuffer(!1);for(var i=0,n=e;i<n.length;i++){var s=n[i];t(s)&&s.render()}this._engine.setDepthBuffer(!0)}},t.prototype._drawCameraPredicate=function(t,e,i){return!t.renderOnlyInRenderTargetTextures&&t.isBackground===e&&0!=(t.layerMask&i)},t.prototype._drawCameraBackground=function(t){var e=this;this._draw((function(i){return e._drawCameraPredicate(i,!0,t.layerMask)}))},t.prototype._drawCameraForeground=function(t){var e=this;this._draw((function(i){return e._drawCameraPredicate(i,!1,t.layerMask)}))},t.prototype._drawRenderTargetPredicate=function(t,e,i,n){return t.renderTargetTextures.length>0&&t.isBackground===e&&t.renderTargetTextures.indexOf(n)>-1&&0!=(t.layerMask&i)},t.prototype._drawRenderTargetBackground=function(t){var e=this;this._draw((function(i){return e._drawRenderTargetPredicate(i,!0,e.scene.activeCamera.layerMask,t)}))},t.prototype._drawRenderTargetForeground=function(t){var e=this;this._draw((function(i){return e._drawRenderTargetPredicate(i,!1,e.scene.activeCamera.layerMask,t)}))},t.prototype.addFromContainer=function(t){var e=this;t.layers&&t.layers.forEach((function(t){e.scene.layers.push(t)}))},t.prototype.removeFromContainer=function(t,e){var i=this;void 0===e&&(e=!1),t.layers&&t.layers.forEach((function(t){var n=i.scene.layers.indexOf(t);-1!==n&&i.scene.layers.splice(n,1),e&&t.dispose()}))},t}();p.ShadersStore.layerPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec4 color;\n\n#include<helperFunctions>\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\n#ifdef LINEAR\nbaseColor.rgb=toGammaSpace(baseColor.rgb);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\ngl_FragColor=baseColor*color;\n}";p.ShadersStore.layerVertexShader="\nattribute vec2 position;\n\nuniform vec2 scale;\nuniform vec2 offset;\nuniform mat4 textureMatrix;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvec2 shiftedPosition=position*scale+offset;\nvUV=vec2(textureMatrix*vec4(shiftedPosition*madd+madd,1.0,0.0));\ngl_Position=vec4(shiftedPosition,0.0,1.0);\n}";var Gs=function(){function t(t,e,i,n,r){this.name=t,this.scale=new d(1,1),this.offset=new d(0,0),this.alphaBlendingMode=2,this.layerMask=268435455,this.renderTargetTextures=[],this.renderOnlyInRenderTargetTextures=!1,this._vertexBuffers={},this.onDisposeObservable=new a,this.onBeforeRenderObservable=new a,this.onAfterRenderObservable=new a,this.texture=e?new M(e,i,!0):null,this.isBackground=void 0===n||n,this.color=void 0===r?new g(1,1,1,1):r,this._scene=i||y.LastCreatedScene;var o=this._scene._getComponent(s.NAME_LAYER);o||(o=new Ws(this._scene),this._scene._addComponent(o)),this._scene.layers.push(this);var h=this._scene.getEngine(),l=[];l.push(1,1),l.push(-1,1),l.push(-1,-1),l.push(1,-1);var c=new f(h,l,f.PositionKind,!1,!1,2);this._vertexBuffers[f.PositionKind]=c,this._createIndexBuffer()}return Object.defineProperty(t.prototype,"onDispose",{set:function(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBeforeRender",{set:function(t){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onAfterRender",{set:function(t){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(t)},enumerable:!1,configurable:!0}),t.prototype._createIndexBuffer=function(){var t=this._scene.getEngine(),e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=t.createIndexBuffer(e)},t.prototype._rebuild=function(){var t=this._vertexBuffers[f.PositionKind];t&&t._rebuild(),this._createIndexBuffer()},t.prototype.render=function(){var t=this._scene.getEngine(),e="";this.alphaTest&&(e="#define ALPHATEST"),this.texture&&!this.texture.gammaSpace&&(e+="\r\n#define LINEAR"),this._previousDefines!==e&&(this._previousDefines=e,this._effect=t.createEffect("layer",[f.PositionKind],["textureMatrix","color","scale","offset"],["textureSampler"],e));var i=this._effect;if(i&&i.isReady()&&this.texture&&this.texture.isReady()){t=this._scene.getEngine();this.onBeforeRenderObservable.notifyObservers(this),t.enableEffect(i),t.setState(!1),i.setTexture("textureSampler",this.texture),i.setMatrix("textureMatrix",this.texture.getTextureMatrix()),i.setFloat4("color",this.color.r,this.color.g,this.color.b,this.color.a),i.setVector2("offset",this.offset),i.setVector2("scale",this.scale),t.bindBuffers(this._vertexBuffers,this._indexBuffer,i),this.alphaTest?t.drawElementsType(_.TriangleFillMode,0,6):(t.setAlphaMode(this.alphaBlendingMode),t.drawElementsType(_.TriangleFillMode,0,6),t.setAlphaMode(0)),this.onAfterRenderObservable.notifyObservers(this)}},t.prototype.dispose=function(){var t=this._vertexBuffers[f.PositionKind];t&&(t.dispose(),this._vertexBuffers[f.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this.texture&&(this.texture.dispose(),this.texture=null),this.renderTargetTextures=[];var e=this._scene.layers.indexOf(this);this._scene.layers.splice(e,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onAfterRenderObservable.clear(),this.onBeforeRenderObservable.clear()},t}(),zs=function(){function t(e,i,n){void 0===i&&(i=t.UNITMODE_PIXEL),void 0===n&&(n=!0),this.unit=i,this.negativeValueAllowed=n,this._value=1,this.ignoreAdaptiveScaling=!1,this._value=e,this._originalUnit=i}return Object.defineProperty(t.prototype,"isPercentage",{get:function(){return this.unit===t.UNITMODE_PERCENTAGE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPixel",{get:function(){return this.unit===t.UNITMODE_PIXEL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"internalValue",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.getValueInPixel=function(t,e){return this.isPixel?this.getValue(t):this.getValue(t)*e},t.prototype.updateInPlace=function(e,i){return void 0===i&&(i=t.UNITMODE_PIXEL),this._value=e,this.unit=i,this},t.prototype.getValue=function(e){if(e&&!this.ignoreAdaptiveScaling&&this.unit!==t.UNITMODE_PERCENTAGE){var i=0,n=0;if(e.idealWidth&&(i=this._value*e.getSize().width/e.idealWidth),e.idealHeight&&(n=this._value*e.getSize().height/e.idealHeight),e.useSmallestIdeal&&e.idealWidth&&e.idealHeight)return window.innerWidth<window.innerHeight?i:n;if(e.idealWidth)return i;if(e.idealHeight)return n}return this._value},t.prototype.toString=function(e,i){switch(this.unit){case t.UNITMODE_PERCENTAGE:var n=100*this.getValue(e);return(i?n.toFixed(i):n)+"%";case t.UNITMODE_PIXEL:var s=this.getValue(e);return(i?s.toFixed(i):s)+"px"}return this.unit.toString()},t.prototype.fromString=function(e){var i=t._Regex.exec(e.toString());if(!i||0===i.length)return!1;var n=parseFloat(i[1]),s=this._originalUnit;if(this.negativeValueAllowed||n<0&&(n=0),4===i.length)switch(i[3]){case"px":s=t.UNITMODE_PIXEL;break;case"%":s=t.UNITMODE_PERCENTAGE,n/=100}return(n!==this._value||s!==this.unit)&&(this._value=n,this.unit=s,!0)},Object.defineProperty(t,"UNITMODE_PERCENTAGE",{get:function(){return t._UNITMODE_PERCENTAGE},enumerable:!1,configurable:!0}),Object.defineProperty(t,"UNITMODE_PIXEL",{get:function(){return t._UNITMODE_PIXEL},enumerable:!1,configurable:!0}),t._Regex=/(^-?\d*(\.\d+)?)(%|px)?/,t._UNITMODE_PERCENTAGE=0,t._UNITMODE_PIXEL=1,t}(),Xs=[new d(0,0),new d(0,0),new d(0,0),new d(0,0)],Ys=[new d(0,0),new d(0,0),new d(0,0),new d(0,0)],Qs=new d(0,0),Js=new d(0,0),Zs=function(){function t(t,e,i,n){this.left=t,this.top=e,this.width=i,this.height=n}return t.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e,i,n){this.left=t,this.top=e,this.width=i,this.height=n},t.CombineToRef=function(t,e,i){var n=Math.min(t.left,e.left),s=Math.min(t.top,e.top),r=Math.max(t.left+t.width,e.left+e.width),o=Math.max(t.top+t.height,e.top+e.height);i.left=n,i.top=s,i.width=r-n,i.height=o-s},t.prototype.addAndTransformToRef=function(t,e,i,n,s,r){var o=this.left+e,a=this.top+i,h=this.width+n,l=this.height+s;Xs[0].copyFromFloats(o,a),Xs[1].copyFromFloats(o+h,a),Xs[2].copyFromFloats(o+h,a+l),Xs[3].copyFromFloats(o,a+l),Qs.copyFromFloats(Number.MAX_VALUE,Number.MAX_VALUE),Js.copyFromFloats(0,0);for(var c=0;c<4;c++)t.transformCoordinates(Xs[c].x,Xs[c].y,Ys[c]),Qs.x=Math.floor(Math.min(Qs.x,Ys[c].x)),Qs.y=Math.floor(Math.min(Qs.y,Ys[c].y)),Js.x=Math.ceil(Math.max(Js.x,Ys[c].x)),Js.y=Math.ceil(Math.max(Js.y,Ys[c].y));r.left=Qs.x,r.top=Qs.y,r.width=Js.x-Qs.x,r.height=Js.y-Qs.y},t.prototype.transformToRef=function(t,e){this.addAndTransformToRef(t,0,0,0,0,e)},t.prototype.isEqualsTo=function(t){return this.left===t.left&&(this.top===t.top&&(this.width===t.width&&this.height===t.height))},t.Empty=function(){return new t(0,0,0,0)},t}(),$s=function(t){function e(e,i){void 0===i&&(i=0);var n=t.call(this,e.x,e.y)||this;return n.buttonIndex=i,n}return i(e,t),e}(d),qs=function(){function t(t,e,i,n,s,r){this.m=new Float32Array(6),this.fromValues(t,e,i,n,s,r)}return t.prototype.fromValues=function(t,e,i,n,s,r){return this.m[0]=t,this.m[1]=e,this.m[2]=i,this.m[3]=n,this.m[4]=s,this.m[5]=r,this},t.prototype.determinant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},t.prototype.invertToRef=function(t){var e=this.m[0],i=this.m[1],n=this.m[2],s=this.m[3],r=this.m[4],o=this.m[5],a=this.determinant();if(a<m*m)return t.m[0]=0,t.m[1]=0,t.m[2]=0,t.m[3]=0,t.m[4]=0,t.m[5]=0,this;var h=1/a,l=n*o-s*r,c=i*r-e*o;return t.m[0]=s*h,t.m[1]=-i*h,t.m[2]=-n*h,t.m[3]=e*h,t.m[4]=l*h,t.m[5]=c*h,this},t.prototype.multiplyToRef=function(t,e){var i=this.m[0],n=this.m[1],s=this.m[2],r=this.m[3],o=this.m[4],a=this.m[5],h=t.m[0],l=t.m[1],c=t.m[2],u=t.m[3],p=t.m[4],f=t.m[5];return e.m[0]=i*h+n*c,e.m[1]=i*l+n*u,e.m[2]=s*h+r*c,e.m[3]=s*l+r*u,e.m[4]=o*h+a*c+p,e.m[5]=o*l+a*u+f,this},t.prototype.transformCoordinates=function(t,e,i){return i.x=t*this.m[0]+e*this.m[2]+this.m[4],i.y=t*this.m[1]+e*this.m[3]+this.m[5],this},t.Identity=function(){return new t(1,0,0,1,0,0)},t.TranslationToRef=function(t,e,i){i.fromValues(1,0,0,1,t,e)},t.ScalingToRef=function(t,e,i){i.fromValues(t,0,0,e,0,0)},t.RotationToRef=function(t,e){var i=Math.sin(t),n=Math.cos(t);e.fromValues(n,i,-i,n,0,0)},t.ComposeToRef=function(e,i,n,s,r,o,a){t.TranslationToRef(e,i,t._TempPreTranslationMatrix),t.ScalingToRef(s,r,t._TempScalingMatrix),t.RotationToRef(n,t._TempRotationMatrix),t.TranslationToRef(-e,-i,t._TempPostTranslationMatrix),t._TempPreTranslationMatrix.multiplyToRef(t._TempScalingMatrix,t._TempCompose0),t._TempCompose0.multiplyToRef(t._TempRotationMatrix,t._TempCompose1),o?(t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,t._TempCompose2),t._TempCompose2.multiplyToRef(o,a)):t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,a)},t._TempPreTranslationMatrix=t.Identity(),t._TempPostTranslationMatrix=t.Identity(),t._TempRotationMatrix=t.Identity(),t._TempScalingMatrix=t.Identity(),t._TempCompose0=t.Identity(),t._TempCompose1=t.Identity(),t._TempCompose2=t.Identity(),t}(),Ks=function(){function e(t){this.name=t,this._alpha=1,this._alphaSet=!1,this._zIndex=0,this._currentMeasure=Zs.Empty(),this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new zs(18,zs.UNITMODE_PIXEL,!1),this._width=new zs(1,zs.UNITMODE_PERCENTAGE,!1),this._height=new zs(1,zs.UNITMODE_PERCENTAGE,!1),this._color="",this._style=null,this._horizontalAlignment=e.HORIZONTAL_ALIGNMENT_CENTER,this._verticalAlignment=e.VERTICAL_ALIGNMENT_CENTER,this._isDirty=!0,this._wasDirty=!1,this._tempParentMeasure=Zs.Empty(),this._prevCurrentMeasureTransformedIntoGlobalSpace=Zs.Empty(),this._cachedParentMeasure=Zs.Empty(),this._paddingLeft=new zs(0),this._paddingRight=new zs(0),this._paddingTop=new zs(0),this._paddingBottom=new zs(0),this._left=new zs(0),this._top=new zs(0),this._scaleX=1,this._scaleY=1,this._rotation=0,this._transformCenterX=.5,this._transformCenterY=.5,this._transformMatrix=qs.Identity(),this._invertTransformMatrix=qs.Identity(),this._transformedPosition=d.Zero(),this._isMatrixDirty=!0,this._isVisible=!0,this._isHighlighted=!1,this._fontSet=!1,this._dummyVector2=d.Zero(),this._downCount=0,this._enterCount=-1,this._doNotRender=!1,this._downPointerIds={},this._isEnabled=!0,this._disabledColor="#9a9a9a",this._disabledColorItem="#6a6a6a",this._rebuildLayout=!1,this._customData={},this._isClipped=!1,this._automaticSize=!1,this.metadata=null,this.isHitTestVisible=!0,this.isPointerBlocker=!1,this.isFocusInvisible=!1,this.clipChildren=!0,this.clipContent=!0,this.useBitmapCache=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowBlur=0,this._shadowColor="black",this.hoverCursor="",this._linkOffsetX=new zs(0),this._linkOffsetY=new zs(0),this.onWheelObservable=new a,this.onPointerMoveObservable=new a,this.onPointerOutObservable=new a,this.onPointerDownObservable=new a,this.onPointerUpObservable=new a,this.onPointerClickObservable=new a,this.onPointerEnterObservable=new a,this.onDirtyObservable=new a,this.onBeforeDrawObservable=new a,this.onAfterDrawObservable=new a,this.onDisposeObservable=new a,this.fixedRatio=0,this._fixedRatioMasterIsWidth=!0,this._tmpMeasureA=new Zs(0,0,0,0)}return Object.defineProperty(e.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(t){this._shadowOffsetX!==t&&(this._shadowOffsetX=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},set:function(t){this._shadowOffsetY!==t&&(this._shadowOffsetY=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowBlur",{get:function(){return this._shadowBlur},set:function(t){this._shadowBlur!==t&&(this._shadowBlur=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor!==t&&(this._shadowColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!1,configurable:!0}),e.prototype.getClassName=function(){return this._getTypeName()},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontOffset",{get:function(){return this._fontOffset},set:function(t){this._fontOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alphaSet=!0,this._alpha=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(t){this._isHighlighted!==t&&(this._isHighlighted=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformCenterY",{get:function(){return this._transformCenterY},set:function(t){this._transformCenterY!==t&&(this._transformCenterY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformCenterX",{get:function(){return this._transformCenterX},set:function(t){this._transformCenterX!==t&&(this._transformCenterX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAlignment",{get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._fixedRatioMasterIsWidth=!0,this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"widthInPixels",{get:function(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this._fixedRatioMasterIsWidth=!0,this.width=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._fixedRatioMasterIsWidth=!1,this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightInPixels",{get:function(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this._fixedRatioMasterIsWidth=!1,this.height=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontSet?this._fontFamily:""},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){var e=this;this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this._style=t,this._style&&(this._styleObserver=this._style.onChangedObservable.add((function(){e._markAsDirty(),e._resetFontCache()}))),this._markAsDirty(),this._resetFontCache()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFontSizeInPercentage",{get:function(){return this._fontSize.isPercentage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSizeInPixels",{get:function(){var t=this._style?this._style._fontSize:this._fontSize;return t.isPixel?t.getValue(this._host):t.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.fontSize=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&(this._markAsDirty(),this._resetFontCache())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!==t&&(this._color=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this.zIndex!==t&&(this._zIndex=t,this.parent&&this.parent._reOrderControl(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notRenderable",{get:function(){return this._doNotRender},set:function(t){this._doNotRender!==t&&(this._doNotRender=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible!==t&&(this._isVisible=t,this._markAsDirty(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkedMesh",{get:function(){return this._linkedMesh},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this._paddingLeft.toString(this._host)},set:function(t){this._paddingLeft.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeftInPixels",{get:function(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingLeft=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this._paddingRight.toString(this._host)},set:function(t){this._paddingRight.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingRightInPixels",{get:function(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingRight=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this._paddingTop.toString(this._host)},set:function(t){this._paddingTop.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingTopInPixels",{get:function(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingTop=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this._paddingBottom.toString(this._host)},set:function(t){this._paddingBottom.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottomInPixels",{get:function(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingBottom=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left.toString(this._host)},set:function(t){this._left.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftInPixels",{get:function(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.left=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top.toString(this._host)},set:function(t){this._top.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topInPixels",{get:function(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.top=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkOffsetX",{get:function(){return this._linkOffsetX.toString(this._host)},set:function(t){this._linkOffsetX.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkOffsetXInPixels",{get:function(){return this._linkOffsetX.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.linkOffsetX=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkOffsetY",{get:function(){return this._linkOffsetY.toString(this._host)},set:function(t){this._linkOffsetY.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkOffsetYInPixels",{get:function(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.linkOffsetY=t+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this._currentMeasure.left+this._currentMeasure.width/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this._currentMeasure.top+this._currentMeasure.height/2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){this._isEnabled!==t&&(this._isEnabled=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabledColor",{get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabledColorItem",{get:function(){return this._disabledColorItem},set:function(t){this._disabledColorItem!==t&&(this._disabledColorItem=t,this._markAsDirty())},enumerable:!1,configurable:!0}),e.prototype._getTypeName=function(){return"Control"},e.prototype.getAscendantOfClass=function(t){return this.parent?this.parent.getClassName()===t?this.parent:this.parent.getAscendantOfClass(t):null},e.prototype._resetFontCache=function(){this._fontSet=!0,this._markAsDirty()},e.prototype.isAscendant=function(t){return!!this.parent&&(this.parent===t||this.parent.isAscendant(t))},e.prototype.getLocalCoordinates=function(t){var e=d.Zero();return this.getLocalCoordinatesToRef(t,e),e},e.prototype.getLocalCoordinatesToRef=function(t,e){return e.x=t.x-this._currentMeasure.left,e.y=t.y-this._currentMeasure.top,this},e.prototype.getParentLocalCoordinates=function(t){var e=d.Zero();return e.x=t.x-this._cachedParentMeasure.left,e.y=t.y-this._cachedParentMeasure.top,e},e.prototype.moveToVector3=function(i,n){if(this._host&&this.parent===this._host._rootContainer){this.horizontalAlignment=e.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=e.VERTICAL_ALIGNMENT_TOP;var s=this._host._getGlobalViewport(n),r=t.Project(i,v.Identity(),n.getTransformMatrix(),s);this._moveToProjectedPosition(r),r.z<0||r.z>1?this.notRenderable=!0:this.notRenderable=!1}else b.Error("Cannot move a control to a vector3 if the control is not at root level")},e.prototype.getDescendantsToRef=function(t,e,i){},e.prototype.getDescendants=function(t,e){var i=new Array;return this.getDescendantsToRef(i,t,e),i},e.prototype.linkWithMesh=function(t){if(!this._host||this.parent&&this.parent!==this._host._rootContainer)t&&b.Error("Cannot link a control to a mesh if the control is not at root level");else{var i=this._host._linkedControls.indexOf(this);if(-1!==i)return this._linkedMesh=t,void(t||this._host._linkedControls.splice(i,1));t&&(this.horizontalAlignment=e.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=e.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=t,this._host._linkedControls.push(this))}},e.prototype._moveToProjectedPosition=function(t){var e=this._left.getValue(this._host),i=this._top.getValue(this._host),n=t.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2,s=t.y+this._linkOffsetY.getValue(this._host)-this._currentMeasure.height/2;this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling&&(Math.abs(n-e)<.5&&(n=e),Math.abs(s-i)<.5&&(s=i)),this.left=n+"px",this.top=s+"px",this._left.ignoreAdaptiveScaling=!0,this._top.ignoreAdaptiveScaling=!0,this._markAsDirty()},e.prototype._offsetLeft=function(t){this._isDirty=!0,this._currentMeasure.left+=t},e.prototype._offsetTop=function(t){this._isDirty=!0,this._currentMeasure.top+=t},e.prototype._markMatrixAsDirty=function(){this._isMatrixDirty=!0,this._flagDescendantsAsMatrixDirty()},e.prototype._flagDescendantsAsMatrixDirty=function(){},e.prototype._intersectsRect=function(t){return this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),!(this._tmpMeasureA.left>=t.left+t.width)&&(!(this._tmpMeasureA.top>=t.top+t.height)&&(!(this._tmpMeasureA.left+this._tmpMeasureA.width<=t.left)&&!(this._tmpMeasureA.top+this._tmpMeasureA.height<=t.top)))},e.prototype.invalidateRect=function(){if(this._transform(),this.host&&this.host.useInvalidateRectOptimization)if(this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),Zs.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA),this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var t=this.shadowOffsetX,e=this.shadowOffsetY,i=this.shadowBlur,n=Math.min(Math.min(t,0)-2*i,0),s=Math.max(Math.max(t,0)+2*i,0),r=Math.min(Math.min(e,0)-2*i,0),o=Math.max(Math.max(e,0)+2*i,0);this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+n),Math.floor(this._tmpMeasureA.top+r),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+s),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height+o))}else this.host.invalidateRect(Math.floor(this._tmpMeasureA.left),Math.floor(this._tmpMeasureA.top),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height))},e.prototype._markAsDirty=function(t){void 0===t&&(t=!1),(this._isVisible||t)&&(this._isDirty=!0,this._host&&this._host.markAsDirty())},e.prototype._markAllAsDirty=function(){this._markAsDirty(),this._font&&this._prepareFont()},e.prototype._link=function(t){this._host=t,this._host&&(this.uniqueId=this._host.getScene().getUniqueId())},e.prototype._transform=function(t){if(this._isMatrixDirty||1!==this._scaleX||1!==this._scaleY||0!==this._rotation){var e=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,i=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;t&&(t.translate(e,i),t.rotate(this._rotation),t.scale(this._scaleX,this._scaleY),t.translate(-e,-i)),(this._isMatrixDirty||this._cachedOffsetX!==e||this._cachedOffsetY!==i)&&(this._cachedOffsetX=e,this._cachedOffsetY=i,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),qs.ComposeToRef(-e,-i,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix))}},e.prototype._renderHighlight=function(t){this.isHighlighted&&(t.save(),t.strokeStyle="#4affff",t.lineWidth=2,this._renderHighlightSpecific(t),t.restore())},e.prototype._renderHighlightSpecific=function(t){t.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)},e.prototype._applyStates=function(t){this._isFontSizeInPercentage&&(this._fontSet=!0),this._fontSet&&(this._prepareFont(),this._fontSet=!1),this._font&&(t.font=this._font),this._color&&(t.fillStyle=this._color),e.AllowAlphaInheritance?t.globalAlpha*=this._alpha:this._alphaSet&&(t.globalAlpha=this.parent?this.parent.alpha*this._alpha:this._alpha)},e.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(t)){this.host._numLayoutCalls++,this._currentMeasure.addAndTransformToRef(this._transformMatrix,0|-this.paddingLeftInPixels,0|-this.paddingTopInPixels,0|this.paddingRightInPixels,0|this.paddingBottomInPixels,this._prevCurrentMeasureTransformedIntoGlobalSpace),e.save(),this._applyStates(e);var i=0;do{this._rebuildLayout=!1,this._processMeasures(t,e),i++}while(this._rebuildLayout&&i<3);i>=3&&r.Error("Layout cycle detected in GUI (Control name="+this.name+", uniqueId="+this.uniqueId+")"),e.restore(),this.invalidateRect(),this._evaluateClippingState(t)}return this._wasDirty=this._isDirty,this._isDirty=!1,!0},e.prototype._processMeasures=function(t,e){this._currentMeasure.copyFrom(t),this._preMeasure(t,e),this._measure(),this._computeAlignment(t,e),this._currentMeasure.left=0|this._currentMeasure.left,this._currentMeasure.top=0|this._currentMeasure.top,this._currentMeasure.width=0|this._currentMeasure.width,this._currentMeasure.height=0|this._currentMeasure.height,this._additionalProcessing(t,e),this._cachedParentMeasure.copyFrom(t),this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)},e.prototype._evaluateClippingState=function(t){if(this.parent&&this.parent.clipChildren){if(this._currentMeasure.left>t.left+t.width)return void(this._isClipped=!0);if(this._currentMeasure.left+this._currentMeasure.width<t.left)return void(this._isClipped=!0);if(this._currentMeasure.top>t.top+t.height)return void(this._isClipped=!0);if(this._currentMeasure.top+this._currentMeasure.height<t.top)return void(this._isClipped=!0)}this._isClipped=!1},e.prototype._measure=function(){this._width.isPixel?this._currentMeasure.width=this._width.getValue(this._host):this._currentMeasure.width*=this._width.getValue(this._host),this._height.isPixel?this._currentMeasure.height=this._height.getValue(this._host):this._currentMeasure.height*=this._height.getValue(this._host),0!==this.fixedRatio&&(this._fixedRatioMasterIsWidth?this._currentMeasure.height=this._currentMeasure.width*this.fixedRatio:this._currentMeasure.width=this._currentMeasure.height*this.fixedRatio)},e.prototype._computeAlignment=function(t,i){var n=this._currentMeasure.width,s=this._currentMeasure.height,r=t.width,o=t.height,a=0,h=0;switch(this.horizontalAlignment){case e.HORIZONTAL_ALIGNMENT_LEFT:a=0;break;case e.HORIZONTAL_ALIGNMENT_RIGHT:a=r-n;break;case e.HORIZONTAL_ALIGNMENT_CENTER:a=(r-n)/2}switch(this.verticalAlignment){case e.VERTICAL_ALIGNMENT_TOP:h=0;break;case e.VERTICAL_ALIGNMENT_BOTTOM:h=o-s;break;case e.VERTICAL_ALIGNMENT_CENTER:h=(o-s)/2}this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=r*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=r*this._paddingLeft.getValue(this._host)),this._paddingRight.isPixel?this._currentMeasure.width-=this._paddingRight.getValue(this._host):this._currentMeasure.width-=r*this._paddingRight.getValue(this._host),this._paddingTop.isPixel?(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=o*this._paddingTop.getValue(this._host),this._currentMeasure.height-=o*this._paddingTop.getValue(this._host)),this._paddingBottom.isPixel?this._currentMeasure.height-=this._paddingBottom.getValue(this._host):this._currentMeasure.height-=o*this._paddingBottom.getValue(this._host),this._left.isPixel?this._currentMeasure.left+=this._left.getValue(this._host):this._currentMeasure.left+=r*this._left.getValue(this._host),this._top.isPixel?this._currentMeasure.top+=this._top.getValue(this._host):this._currentMeasure.top+=o*this._top.getValue(this._host),this._currentMeasure.left+=a,this._currentMeasure.top+=h},e.prototype._preMeasure=function(t,e){},e.prototype._additionalProcessing=function(t,e){},e.prototype._clipForChildren=function(t){},e.prototype._clip=function(t,i){if(t.beginPath(),e._ClipMeasure.copyFrom(this._currentMeasure),i){i.transformToRef(this._invertTransformMatrix,this._tmpMeasureA);var n=new Zs(0,0,0,0);n.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),n.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),n.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-n.left,n.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-n.top,e._ClipMeasure.copyFrom(n)}if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var s=this.shadowOffsetX,r=this.shadowOffsetY,o=this.shadowBlur,a=Math.min(Math.min(s,0)-2*o,0),h=Math.max(Math.max(s,0)+2*o,0),l=Math.min(Math.min(r,0)-2*o,0),c=Math.max(Math.max(r,0)+2*o,0);t.rect(e._ClipMeasure.left+a,e._ClipMeasure.top+l,e._ClipMeasure.width+h-a,e._ClipMeasure.height+c-l)}else t.rect(e._ClipMeasure.left,e._ClipMeasure.top,e._ClipMeasure.width,e._ClipMeasure.height);t.clip()},e.prototype._render=function(t,e){return!this.isVisible||this.notRenderable||this._isClipped?(this._isDirty=!1,!1):(this.host._numRenderCalls++,t.save(),this._applyStates(t),this._transform(t),this.clipContent&&this._clip(t,e),this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this),this.useBitmapCache&&!this._wasDirty&&this._cacheData?t.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(t,e),this.useBitmapCache&&this._wasDirty&&(this._cacheData=t.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._renderHighlight(t),this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this),t.restore(),!0)},e.prototype._draw=function(t,e){},e.prototype.contains=function(t,e){return this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y,!(t<this._currentMeasure.left)&&(!(t>this._currentMeasure.left+this._currentMeasure.width)&&(!(e<this._currentMeasure.top)&&(!(e>this._currentMeasure.top+this._currentMeasure.height)&&(this.isPointerBlocker&&(this._host._shouldBlockPointer=!0),!0))))},e.prototype._processPicking=function(t,e,i,n,s,r,o,a){return!!this._isEnabled&&(!(!this.isHitTestVisible||!this.isVisible||this._doNotRender)&&(!!this.contains(t,e)&&(this._processObservables(n,t,e,i,s,r,o,a),!0)))},e.prototype._onPointerMove=function(t,e,i,n){this.onPointerMoveObservable.notifyObservers(e,-1,t,this,n)&&null!=this.parent&&this.parent._onPointerMove(t,e,i,n)},e.prototype._onPointerEnter=function(t,e){return!!this._isEnabled&&(!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this,e)&&null!=this.parent&&this.parent._onPointerEnter(t,e),!0))},e.prototype._onPointerOut=function(t,e,i){if(void 0===i&&(i=!1),i||this._isEnabled&&t!==this){this._enterCount=0;var n=!0;t.isAscendant(this)||(n=this.onPointerOutObservable.notifyObservers(this,-1,t,this,e)),n&&null!=this.parent&&this.parent._onPointerOut(t,e,i)}},e.prototype._onPointerDown=function(t,e,i,n,s){return this._onPointerEnter(this,s),0===this._downCount&&(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new $s(e,n),-1,t,this,s)&&null!=this.parent&&this.parent._onPointerDown(t,e,i,n,s),!0)},e.prototype._onPointerUp=function(t,e,i,n,s,r){if(this._isEnabled){this._downCount=0,delete this._downPointerIds[i];var o=s;s&&(this._enterCount>0||-1===this._enterCount)&&(o=this.onPointerClickObservable.notifyObservers(new $s(e,n),-1,t,this,r)),this.onPointerUpObservable.notifyObservers(new $s(e,n),-1,t,this,r)&&null!=this.parent&&this.parent._onPointerUp(t,e,i,n,o,r)}},e.prototype._forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,d.Zero(),t,0,!0);else for(var e in this._downPointerIds)this._onPointerUp(this,d.Zero(),+e,0,!0)},e.prototype._onWheelScroll=function(t,e){this._isEnabled&&(this.onWheelObservable.notifyObservers(new d(t,e))&&null!=this.parent&&this.parent._onWheelScroll(t,e))},e.prototype._onCanvasBlur=function(){},e.prototype._processObservables=function(t,e,i,n,s,r,o,a){if(!this._isEnabled)return!1;if(this._dummyVector2.copyFromFloats(e,i),t===E.POINTERMOVE){this._onPointerMove(this,this._dummyVector2,s,n);var h=this._host._lastControlOver[s];return h&&h!==this&&h._onPointerOut(this,n),h!==this&&this._onPointerEnter(this,n),this._host._lastControlOver[s]=this,!0}return t===E.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,s,r,n),this._host._registerLastControlDown(this,s),this._host._lastPickedControl=this,!0):t===E.POINTERUP?(this._host._lastControlDown[s]&&this._host._lastControlDown[s]._onPointerUp(this,this._dummyVector2,s,r,!0,n),delete this._host._lastControlDown[s],!0):!(t!==E.POINTERWHEEL||!this._host._lastControlOver[s])&&(this._host._lastControlOver[s]._onWheelScroll(o,a),!0)},e.prototype._prepareFont=function(){(this._font||this._fontSet)&&(this._style?this._font=this._style.fontStyle+" "+this._style.fontWeight+" "+this.fontSizeInPixels+"px "+this._style.fontFamily:this._font=this._fontStyle+" "+this._fontWeight+" "+this.fontSizeInPixels+"px "+this._fontFamily,this._fontOffset=e._GetFontOffset(this._font))},e.prototype.dispose=function(){(this.onDirtyObservable.clear(),this.onBeforeDrawObservable.clear(),this.onAfterDrawObservable.clear(),this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this.onWheelObservable.clear(),this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this.parent&&(this.parent.removeControl(this),this.parent=null),this._host)&&(this._host._linkedControls.indexOf(this)>-1&&this.linkWithMesh(null));this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},Object.defineProperty(e,"HORIZONTAL_ALIGNMENT_LEFT",{get:function(){return e._HORIZONTAL_ALIGNMENT_LEFT},enumerable:!1,configurable:!0}),Object.defineProperty(e,"HORIZONTAL_ALIGNMENT_RIGHT",{get:function(){return e._HORIZONTAL_ALIGNMENT_RIGHT},enumerable:!1,configurable:!0}),Object.defineProperty(e,"HORIZONTAL_ALIGNMENT_CENTER",{get:function(){return e._HORIZONTAL_ALIGNMENT_CENTER},enumerable:!1,configurable:!0}),Object.defineProperty(e,"VERTICAL_ALIGNMENT_TOP",{get:function(){return e._VERTICAL_ALIGNMENT_TOP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"VERTICAL_ALIGNMENT_BOTTOM",{get:function(){return e._VERTICAL_ALIGNMENT_BOTTOM},enumerable:!1,configurable:!0}),Object.defineProperty(e,"VERTICAL_ALIGNMENT_CENTER",{get:function(){return e._VERTICAL_ALIGNMENT_CENTER},enumerable:!1,configurable:!0}),e._GetFontOffset=function(t){if(e._FontHeightSizes[t])return e._FontHeightSizes[t];var i=document.createElement("span");i.innerHTML="Hg",i.style.font=t;var n=document.createElement("div");n.style.display="inline-block",n.style.width="1px",n.style.height="0px",n.style.verticalAlign="bottom";var s=document.createElement("div");s.style.whiteSpace="nowrap",s.appendChild(i),s.appendChild(n),document.body.appendChild(s);var r=0,o=0;try{o=n.getBoundingClientRect().top-i.getBoundingClientRect().top,n.style.verticalAlign="baseline",r=n.getBoundingClientRect().top-i.getBoundingClientRect().top}finally{document.body.removeChild(s)}var a={ascent:r,height:o,descent:o-r};return e._FontHeightSizes[t]=a,a},e.drawEllipse=function(t,e,i,n,s){s.translate(t,e),s.scale(i,n),s.beginPath(),s.arc(0,0,1,0,2*Math.PI),s.closePath(),s.scale(1/i,1/n),s.translate(-t,-e)},e.AllowAlphaInheritance=!1,e._ClipMeasure=new Zs(0,0,0,0),e._HORIZONTAL_ALIGNMENT_LEFT=0,e._HORIZONTAL_ALIGNMENT_RIGHT=1,e._HORIZONTAL_ALIGNMENT_CENTER=2,e._VERTICAL_ALIGNMENT_TOP=0,e._VERTICAL_ALIGNMENT_BOTTOM=1,e._VERTICAL_ALIGNMENT_CENTER=2,e._FontHeightSizes={},e.AddHeader=function(){},e}();T.RegisteredTypes["BABYLON.GUI.Control"]=Ks;var tr=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._children=new Array,i._measureForChildren=Zs.Empty(),i._background="",i._adaptWidthToChildren=!1,i._adaptHeightToChildren=!1,i.logLayoutCycleErrors=!1,i.maxLayoutCycle=3,i}return i(e,t),Object.defineProperty(e.prototype,"adaptHeightToChildren",{get:function(){return this._adaptHeightToChildren},set:function(t){this._adaptHeightToChildren!==t&&(this._adaptHeightToChildren=t,t&&(this.height="100%"),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adaptWidthToChildren",{get:function(){return this._adaptWidthToChildren},set:function(t){this._adaptWidthToChildren!==t&&(this._adaptWidthToChildren=t,t&&(this.width="100%"),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),e.prototype._getTypeName=function(){return"Container"},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this.children;t<e.length;t++){e[t]._markMatrixAsDirty()}},e.prototype.getChildByName=function(t){for(var e=0,i=this.children;e<i.length;e++){var n=i[e];if(n.name===t)return n}return null},e.prototype.getChildByType=function(t,e){for(var i=0,n=this.children;i<n.length;i++){var s=n[i];if(s.typeName===e)return s}return null},e.prototype.containsControl=function(t){return-1!==this.children.indexOf(t)},e.prototype.addControl=function(t){return t?(-1!==this._children.indexOf(t)||(t._link(this._host),t._markAllAsDirty(),this._reOrderControl(t),this._markAsDirty()),this):this},e.prototype.clearControls=function(){for(var t=0,e=this.children.slice();t<e.length;t++){var i=e[t];this.removeControl(i)}return this},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null),t.linkWithMesh(null),this._host&&this._host._cleanControlAfterRemoval(t),this._markAsDirty(),this},e.prototype._reOrderControl=function(t){this.removeControl(t);for(var e=!1,i=0;i<this._children.length;i++)if(this._children[i].zIndex>t.zIndex){this._children.splice(i,0,t),e=!0;break}e||this._children.push(t),t.parent=this,this._markAsDirty()},e.prototype._offsetLeft=function(e){t.prototype._offsetLeft.call(this,e);for(var i=0,n=this._children;i<n.length;i++){n[i]._offsetLeft(e)}},e.prototype._offsetTop=function(e){t.prototype._offsetTop.call(this,e);for(var i=0,n=this._children;i<n.length;i++){n[i]._offsetTop(e)}},e.prototype._markAllAsDirty=function(){t.prototype._markAllAsDirty.call(this);for(var e=0;e<this._children.length;e++)this._children[e]._markAllAsDirty()},e.prototype._localDraw=function(t){this._background&&(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.restore())},e.prototype._link=function(e){t.prototype._link.call(this,e);for(var i=0,n=this._children;i<n.length;i++){n[i]._link(e)}},e.prototype._beforeLayout=function(){},e.prototype._processMeasures=function(e,i){!this._isDirty&&this._cachedParentMeasure.isEqualsTo(e)||(t.prototype._processMeasures.call(this,e,i),this._evaluateClippingState(e))},e.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this.host._numLayoutCalls++,this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);var i=0;e.save(),this._applyStates(e),this._beforeLayout();do{var n=-1,s=-1;if(this._rebuildLayout=!1,this._processMeasures(t,e),!this._isClipped){for(var o=0,a=this._children;o<a.length;o++){var h=a[o];h._tempParentMeasure.copyFrom(this._measureForChildren),h._layout(this._measureForChildren,e)&&(this.adaptWidthToChildren&&h._width.isPixel&&(n=Math.max(n,h._currentMeasure.width+h.paddingLeftInPixels+h.paddingRightInPixels)),this.adaptHeightToChildren&&h._height.isPixel&&(s=Math.max(s,h._currentMeasure.height+h.paddingTopInPixels+h.paddingBottomInPixels)))}this.adaptWidthToChildren&&n>=0&&(n+=this.paddingLeftInPixels+this.paddingRightInPixels,this.width!==n+"px"&&(this.width=n+"px",this._rebuildLayout=!0)),this.adaptHeightToChildren&&s>=0&&(s+=this.paddingTopInPixels+this.paddingBottomInPixels,this.height!==s+"px"&&(this.height=s+"px",this._rebuildLayout=!0)),this._postMeasure()}i++}while(this._rebuildLayout&&i<this.maxLayoutCycle);return i>=3&&this.logLayoutCycleErrors&&r.Error("Layout cycle detected in GUI (Container name="+this.name+", uniqueId="+this.uniqueId+")"),e.restore(),this._isDirty&&(this.invalidateRect(),this._isDirty=!1),!0},e.prototype._postMeasure=function(){},e.prototype._draw=function(t,e){this._localDraw(t),this.clipChildren&&this._clipForChildren(t);for(var i=0,n=this._children;i<n.length;i++){var s=n[i];e&&!s._intersectsRect(e)||s._render(t,e)}},e.prototype.getDescendantsToRef=function(t,e,i){if(void 0===e&&(e=!1),this.children)for(var n=0;n<this.children.length;n++){var s=this.children[n];i&&!i(s)||t.push(s),e||s.getDescendantsToRef(t,!1,i)}},e.prototype._processPicking=function(e,i,n,s,r,o,a,h){if(!this._isEnabled||!this.isVisible||this.notRenderable)return!1;if(!t.prototype.contains.call(this,e,i))return!1;for(var l=this._children.length-1;l>=0;l--){var c=this._children[l];if(c._processPicking(e,i,n,s,r,o,a,h))return c.hoverCursor&&this._host._changeCursor(c.hoverCursor),!0}return!!this.isHitTestVisible&&this._processObservables(s,e,i,n,r,o,a,h)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(this._currentMeasure)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=this.children.length-1;e>=0;e--)this.children[e].dispose()},e}(Ks);T.RegisteredTypes["BABYLON.GUI.Container"]=tr;var er,ir,nr=function(){function t(t){this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new zs(18,zs.UNITMODE_PIXEL,!1),this.onChangedObservable=new a,this._host=t}return Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&this.onChangedObservable.notifyObservers(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.onChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.onChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.onChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.onChangedObservable.clear()},t}(),sr=function(){function t(){}return t.ALPHA_DISABLE=0,t.ALPHA_ADD=1,t.ALPHA_COMBINE=2,t.ALPHA_SUBTRACT=3,t.ALPHA_MULTIPLY=4,t.ALPHA_MAXIMIZED=5,t.ALPHA_ONEONE=6,t.ALPHA_PREMULTIPLIED=7,t.ALPHA_PREMULTIPLIED_PORTERDUFF=8,t.ALPHA_INTERPOLATE=9,t.ALPHA_SCREENMODE=10,t.ALPHA_ONEONE_ONEONE=11,t.ALPHA_ALPHATOCOLOR=12,t.ALPHA_REVERSEONEMINUS=13,t.ALPHA_SRC_DSTONEMINUSSRCALPHA=14,t.ALPHA_ONEONE_ONEZERO=15,t.ALPHA_EXCLUSION=16,t.ALPHA_EQUATION_ADD=0,t.ALPHA_EQUATION_SUBSTRACT=1,t.ALPHA_EQUATION_REVERSE_SUBTRACT=2,t.ALPHA_EQUATION_MAX=3,t.ALPHA_EQUATION_MIN=4,t.ALPHA_EQUATION_DARKEN=5,t.DELAYLOADSTATE_NONE=0,t.DELAYLOADSTATE_LOADED=1,t.DELAYLOADSTATE_LOADING=2,t.DELAYLOADSTATE_NOTLOADED=4,t.NEVER=512,t.ALWAYS=519,t.LESS=513,t.EQUAL=514,t.LEQUAL=515,t.GREATER=516,t.GEQUAL=518,t.NOTEQUAL=517,t.KEEP=7680,t.REPLACE=7681,t.INCR=7682,t.DECR=7683,t.INVERT=5386,t.INCR_WRAP=34055,t.DECR_WRAP=34056,t.TEXTURE_CLAMP_ADDRESSMODE=0,t.TEXTURE_WRAP_ADDRESSMODE=1,t.TEXTURE_MIRROR_ADDRESSMODE=2,t.TEXTUREFORMAT_ALPHA=0,t.TEXTUREFORMAT_LUMINANCE=1,t.TEXTUREFORMAT_LUMINANCE_ALPHA=2,t.TEXTUREFORMAT_RGB=4,t.TEXTUREFORMAT_RGBA=5,t.TEXTUREFORMAT_RED=6,t.TEXTUREFORMAT_R=6,t.TEXTUREFORMAT_RG=7,t.TEXTUREFORMAT_RED_INTEGER=8,t.TEXTUREFORMAT_R_INTEGER=8,t.TEXTUREFORMAT_RG_INTEGER=9,t.TEXTUREFORMAT_RGB_INTEGER=10,t.TEXTUREFORMAT_RGBA_INTEGER=11,t.TEXTURETYPE_UNSIGNED_BYTE=0,t.TEXTURETYPE_UNSIGNED_INT=0,t.TEXTURETYPE_FLOAT=1,t.TEXTURETYPE_HALF_FLOAT=2,t.TEXTURETYPE_BYTE=3,t.TEXTURETYPE_SHORT=4,t.TEXTURETYPE_UNSIGNED_SHORT=5,t.TEXTURETYPE_INT=6,t.TEXTURETYPE_UNSIGNED_INTEGER=7,t.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4=8,t.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1=9,t.TEXTURETYPE_UNSIGNED_SHORT_5_6_5=10,t.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV=11,t.TEXTURETYPE_UNSIGNED_INT_24_8=12,t.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV=13,t.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV=14,t.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV=15,t.TEXTURE_NEAREST_SAMPLINGMODE=1,t.TEXTURE_NEAREST_NEAREST=1,t.TEXTURE_BILINEAR_SAMPLINGMODE=2,t.TEXTURE_LINEAR_LINEAR=2,t.TEXTURE_TRILINEAR_SAMPLINGMODE=3,t.TEXTURE_LINEAR_LINEAR_MIPLINEAR=3,t.TEXTURE_NEAREST_NEAREST_MIPNEAREST=4,t.TEXTURE_NEAREST_LINEAR_MIPNEAREST=5,t.TEXTURE_NEAREST_LINEAR_MIPLINEAR=6,t.TEXTURE_NEAREST_LINEAR=7,t.TEXTURE_NEAREST_NEAREST_MIPLINEAR=8,t.TEXTURE_LINEAR_NEAREST_MIPNEAREST=9,t.TEXTURE_LINEAR_NEAREST_MIPLINEAR=10,t.TEXTURE_LINEAR_LINEAR_MIPNEAREST=11,t.TEXTURE_LINEAR_NEAREST=12,t.TEXTURE_EXPLICIT_MODE=0,t.TEXTURE_SPHERICAL_MODE=1,t.TEXTURE_PLANAR_MODE=2,t.TEXTURE_CUBIC_MODE=3,t.TEXTURE_PROJECTION_MODE=4,t.TEXTURE_SKYBOX_MODE=5,t.TEXTURE_INVCUBIC_MODE=6,t.TEXTURE_EQUIRECTANGULAR_MODE=7,t.TEXTURE_FIXED_EQUIRECTANGULAR_MODE=8,t.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,t.TEXTURE_FILTERING_QUALITY_OFFLINE=4096,t.TEXTURE_FILTERING_QUALITY_HIGH=64,t.TEXTURE_FILTERING_QUALITY_MEDIUM=16,t.TEXTURE_FILTERING_QUALITY_LOW=8,t.SCALEMODE_FLOOR=1,t.SCALEMODE_NEAREST=2,t.SCALEMODE_CEILING=3,t.MATERIAL_TextureDirtyFlag=1,t.MATERIAL_LightDirtyFlag=2,t.MATERIAL_FresnelDirtyFlag=4,t.MATERIAL_AttributesDirtyFlag=8,t.MATERIAL_MiscDirtyFlag=16,t.MATERIAL_PrePassDirtyFlag=32,t.MATERIAL_AllDirtyFlag=63,t.MATERIAL_TriangleFillMode=0,t.MATERIAL_WireFrameFillMode=1,t.MATERIAL_PointFillMode=2,t.MATERIAL_PointListDrawMode=3,t.MATERIAL_LineListDrawMode=4,t.MATERIAL_LineLoopDrawMode=5,t.MATERIAL_LineStripDrawMode=6,t.MATERIAL_TriangleStripDrawMode=7,t.MATERIAL_TriangleFanDrawMode=8,t.MATERIAL_ClockWiseSideOrientation=0,t.MATERIAL_CounterClockWiseSideOrientation=1,t.ACTION_NothingTrigger=0,t.ACTION_OnPickTrigger=1,t.ACTION_OnLeftPickTrigger=2,t.ACTION_OnRightPickTrigger=3,t.ACTION_OnCenterPickTrigger=4,t.ACTION_OnPickDownTrigger=5,t.ACTION_OnDoublePickTrigger=6,t.ACTION_OnPickUpTrigger=7,t.ACTION_OnPickOutTrigger=16,t.ACTION_OnLongPressTrigger=8,t.ACTION_OnPointerOverTrigger=9,t.ACTION_OnPointerOutTrigger=10,t.ACTION_OnEveryFrameTrigger=11,t.ACTION_OnIntersectionEnterTrigger=12,t.ACTION_OnIntersectionExitTrigger=13,t.ACTION_OnKeyDownTrigger=14,t.ACTION_OnKeyUpTrigger=15,t.PARTICLES_BILLBOARDMODE_Y=2,t.PARTICLES_BILLBOARDMODE_ALL=7,t.PARTICLES_BILLBOARDMODE_STRETCHED=8,t.MESHES_CULLINGSTRATEGY_STANDARD=0,t.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=1,t.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=2,t.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=3,t.SCENELOADER_NO_LOGGING=0,t.SCENELOADER_MINIMAL_LOGGING=1,t.SCENELOADER_SUMMARY_LOGGING=2,t.SCENELOADER_DETAILED_LOGGING=3,t.PREPASS_IRRADIANCE_TEXTURE_TYPE=0,t.PREPASS_POSITION_TEXTURE_TYPE=1,t.PREPASS_VELOCITY_TEXTURE_TYPE=2,t.PREPASS_REFLECTIVITY_TEXTURE_TYPE=3,t.PREPASS_COLOR_TEXTURE_TYPE=4,t.PREPASS_DEPTHNORMAL_TEXTURE_TYPE=5,t.PREPASS_ALBEDO_TEXTURE_TYPE=6,t}(),rr=function(e){function n(t,i,n,s,r,o,h){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===o&&(o=M.NEAREST_SAMPLINGMODE);var l=e.call(this,t,{width:i,height:n},s,r,o,sr.TEXTUREFORMAT_RGBA,h)||this;return l._isDirty=!1,l._rootContainer=new tr("root"),l._lastControlOver={},l._lastControlDown={},l._capturingControl={},l._linkedControls=new Array,l._isFullscreen=!1,l._fullscreenViewport=new O(0,0,1,1),l._idealWidth=0,l._idealHeight=0,l._useSmallestIdeal=!1,l._renderAtIdealSize=!1,l._blockNextFocusCheck=!1,l._renderScale=1,l._cursorChanged=!1,l._defaultMousePointerId=0,l._numLayoutCalls=0,l._numRenderCalls=0,l._clipboardData="",l.onClipboardObservable=new a,l.onControlPickedObservable=new a,l.onBeginLayoutObservable=new a,l.onEndLayoutObservable=new a,l.onBeginRenderObservable=new a,l.onEndRenderObservable=new a,l.premulAlpha=!1,l.applyYInversionOnUpdate=!0,l._useInvalidateRectOptimization=!0,l._invalidatedRectangle=null,l._clearMeasure=new Zs(0,0,0,0),l.onClipboardCopy=function(t){var e=t,i=new Hs(Vs.COPY,e);l.onClipboardObservable.notifyObservers(i),e.preventDefault()},l.onClipboardCut=function(t){var e=t,i=new Hs(Vs.CUT,e);l.onClipboardObservable.notifyObservers(i),e.preventDefault()},l.onClipboardPaste=function(t){var e=t,i=new Hs(Vs.PASTE,e);l.onClipboardObservable.notifyObservers(i),e.preventDefault()},(s=l.getScene())&&l._texture?(l._rootElement=s.getEngine().getInputElement(),l._renderObserver=s.onBeforeCameraRenderObservable.add((function(t){return l._checkUpdate(t)})),l._preKeyboardObserver=s.onPreKeyboardObservable.add((function(t){l._focusedControl&&(t.type===A.KEYDOWN&&l._focusedControl.processKeyboard(t.event),t.skipOnPointerObservable=!0)})),l._rootContainer._link(l),l.hasAlpha=!0,i&&n||(l._resizeObserver=s.getEngine().onResizeObservable.add((function(){return l._onResize()})),l._onResize()),l._texture.isReady=!0,l):l}return i(n,e),Object.defineProperty(n.prototype,"numLayoutCalls",{get:function(){return this._numLayoutCalls},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"numRenderCalls",{get:function(){return this._numRenderCalls},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderScale",{get:function(){return this._renderScale},set:function(t){t!==this._renderScale&&(this._renderScale=t,this._onResize())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this.markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"idealWidth",{get:function(){return this._idealWidth},set:function(t){this._idealWidth!==t&&(this._idealWidth=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"idealHeight",{get:function(){return this._idealHeight},set:function(t){this._idealHeight!==t&&(this._idealHeight=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"useSmallestIdeal",{get:function(){return this._useSmallestIdeal},set:function(t){this._useSmallestIdeal!==t&&(this._useSmallestIdeal=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderAtIdealSize",{get:function(){return this._renderAtIdealSize},set:function(t){this._renderAtIdealSize!==t&&(this._renderAtIdealSize=t,this._onResize())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"idealRatio",{get:function(){var t=0,e=0;return this._idealWidth&&(t=this.getSize().width/this._idealWidth),this._idealHeight&&(e=this.getSize().height/this._idealHeight),this._useSmallestIdeal&&this._idealWidth&&this._idealHeight?window.innerWidth<window.innerHeight?t:e:this._idealWidth?t:this._idealHeight?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"layer",{get:function(){return this._layerToDispose},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!1,configurable:!0}),n.prototype.getChildren=function(){return[this._rootContainer]},n.prototype.getDescendants=function(t,e){return this._rootContainer.getDescendants(t,e)},Object.defineProperty(n.prototype,"focusedControl",{get:function(){return this._focusedControl},set:function(t){this._focusedControl!=t&&(this._focusedControl&&this._focusedControl.onBlur(),t&&t.onFocus(),this._focusedControl=t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isForeground",{get:function(){return!this.layer||!this.layer.isBackground},set:function(t){this.layer&&this.layer.isBackground!==!t&&(this.layer.isBackground=!t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clipboardData",{get:function(){return this._clipboardData},set:function(t){this._clipboardData=t},enumerable:!1,configurable:!0}),n.prototype.getClassName=function(){return"AdvancedDynamicTexture"},n.prototype.executeOnAllControls=function(t,e){e||(e=this._rootContainer),t(e);for(var i=0,n=e.children;i<n.length;i++){var s=n[i];s.children?this.executeOnAllControls(t,s):t(s)}},Object.defineProperty(n.prototype,"useInvalidateRectOptimization",{get:function(){return this._useInvalidateRectOptimization},set:function(t){this._useInvalidateRectOptimization=t},enumerable:!1,configurable:!0}),n.prototype.invalidateRect=function(t,e,i,n){if(this._useInvalidateRectOptimization)if(this._invalidatedRectangle){var s=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,i)),r=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,n));this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,t)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,e)),this._invalidatedRectangle.width=s-this._invalidatedRectangle.left+1,this._invalidatedRectangle.height=r-this._invalidatedRectangle.top+1}else this._invalidatedRectangle=new Zs(t,e,i-t+1,n-e+1)},n.prototype.markAsDirty=function(){this._isDirty=!0},n.prototype.createStyle=function(){return new nr(this)},n.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},n.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},n.prototype.dispose=function(){var t=this.getScene();t&&(this._rootElement=null,t.onBeforeCameraRenderObservable.remove(this._renderObserver),this._resizeObserver&&t.getEngine().onResizeObservable.remove(this._resizeObserver),this._pointerMoveObserver&&t.onPrePointerObservable.remove(this._pointerMoveObserver),this._pointerObserver&&t.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&t.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&t.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._canvasBlurObserver&&t.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver),this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),e.prototype.dispose.call(this))},n.prototype._onResize=function(){var t=this.getScene();if(t){var e=t.getEngine(),i=this.getSize(),n=e.getRenderWidth()*this._renderScale,s=e.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(s=s*this._idealWidth/n,n=this._idealWidth):this._idealHeight&&(n=n*this._idealHeight/s,s=this._idealHeight)),i.width===n&&i.height===s||(this.scaleTo(n,s),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty()),this.invalidateRect(0,0,i.width-1,i.height-1)}},n.prototype._getGlobalViewport=function(t){var e=t.getEngine();return this._fullscreenViewport.toGlobal(e.getRenderWidth(),e.getRenderHeight())},n.prototype.getProjectedPosition=function(e,i){var n=this.getScene();if(!n)return d.Zero();var s=this._getGlobalViewport(n),r=t.Project(e,i,n.getTransformMatrix(),s);return r.scaleInPlace(this.renderScale),new d(r.x,r.y)},n.prototype.getProjectedPositionWithZ=function(e,i){var n=this.getScene();if(!n)return t.Zero();var s=this._getGlobalViewport(n),r=t.Project(e,i,n.getTransformMatrix(),s);return r.scaleInPlace(this.renderScale),new t(r.x,r.y,r.z)},n.prototype._checkUpdate=function(e){if(!this._layerToDispose||0!=(e.layerMask&this._layerToDispose.layerMask)){if(this._isFullscreen&&this._linkedControls.length){var i=this.getScene();if(!i)return;for(var n=this._getGlobalViewport(i),s=function(e){if(!e.isVisible)return"continue";var s=e._linkedMesh;if(!s||s.isDisposed())return b.SetImmediate((function(){e.linkWithMesh(null)})),"continue";var o=s.getBoundingInfo?s.getBoundingInfo().boundingSphere.center:t.ZeroReadOnly,a=t.Project(o,s.getWorldMatrix(),i.getTransformMatrix(),n);if(a.z<0||a.z>1)return e.notRenderable=!0,"continue";e.notRenderable=!1,a.scaleInPlace(r.renderScale),e._moveToProjectedPosition(a)},r=this,o=0,a=this._linkedControls;o<a.length;o++){s(a[o])}}(this._isDirty||this._rootContainer.isDirty)&&(this._isDirty=!1,this._render(),this.update(this.applyYInversionOnUpdate,this.premulAlpha))}},n.prototype._render=function(){var t=this.getSize(),e=t.width,i=t.height,n=this.getContext();n.font="18px Arial",n.strokeStyle="white",this.onBeginLayoutObservable.notifyObservers(this);var s=new Zs(0,0,e,i);this._numLayoutCalls=0,this._rootContainer._layout(s,n),this.onEndLayoutObservable.notifyObservers(this),this._isDirty=!1,this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,e,i),n.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),this._background&&(n.save(),n.fillStyle=this._background,n.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),n.restore()),this.onBeginRenderObservable.notifyObservers(this),this._numRenderCalls=0,this._rootContainer._render(n,this._invalidatedRectangle),this.onEndRenderObservable.notifyObservers(this),this._invalidatedRectangle=null},n.prototype._changeCursor=function(t){this._rootElement&&(this._rootElement.style.cursor=t,this._cursorChanged=!0)},n.prototype._registerLastControlDown=function(t,e){this._lastControlDown[e]=t,this.onControlPickedObservable.notifyObservers(t)},n.prototype._doPicking=function(t,e,i,n,s,r,o,a){var h=this.getScene();if(h){var l=h.getEngine(),c=this.getSize();if(this._isFullscreen){var u=(h.cameraToUseForPointers||h.activeCamera).viewport;t*=c.width/(l.getRenderWidth()*u.width),e*=c.height/(l.getRenderHeight()*u.height)}this._capturingControl[s]?this._capturingControl[s]._processObservables(n,t,e,i,s,r):(this._cursorChanged=!1,this._rootContainer._processPicking(t,e,i,n,s,r,o,a)||(this._changeCursor(""),n===E.POINTERMOVE&&this._lastControlOver[s]&&(this._lastControlOver[s]._onPointerOut(this._lastControlOver[s],i),delete this._lastControlOver[s])),this._cursorChanged||this._changeCursor(""),this._manageFocus())}},n.prototype._cleanControlAfterRemovalFromList=function(t,e){for(var i in t){if(t.hasOwnProperty(i))t[i]===e&&delete t[i]}},n.prototype._cleanControlAfterRemoval=function(t){this._cleanControlAfterRemovalFromList(this._lastControlDown,t),this._cleanControlAfterRemovalFromList(this._lastControlOver,t)},n.prototype.attach=function(){var t=this,e=this.getScene();if(e){var i=new O(0,0,0,0);this._pointerMoveObserver=e.onPrePointerObservable.add((function(n,s){if(!e.isPointerCaptured(n.event.pointerId)&&(n.type===E.POINTERMOVE||n.type===E.POINTERUP||n.type===E.POINTERDOWN||n.type===E.POINTERWHEEL)&&e){n.type===E.POINTERMOVE&&n.event.pointerId&&(t._defaultMousePointerId=n.event.pointerId);var r=e.cameraToUseForPointers||e.activeCamera,o=e.getEngine();r?r.viewport.toGlobalToRef(o.getRenderWidth(),o.getRenderHeight(),i):(i.x=0,i.y=0,i.width=o.getRenderWidth(),i.height=o.getRenderHeight());var a=e.pointerX/o.getHardwareScalingLevel()-i.x,h=e.pointerY/o.getHardwareScalingLevel()-(o.getRenderHeight()-i.y-i.height);t._shouldBlockPointer=!1;var l=n.event.pointerId||t._defaultMousePointerId;t._doPicking(a,h,n,n.type,l,n.event.button,n.event.deltaX,n.event.deltaY),t._shouldBlockPointer&&(n.skipOnPointerObservable=t._shouldBlockPointer)}})),this._attachToOnPointerOut(e),this._attachToOnBlur(e)}},n.prototype.registerClipboardEvents=function(){self.addEventListener("copy",this.onClipboardCopy,!1),self.addEventListener("cut",this.onClipboardCut,!1),self.addEventListener("paste",this.onClipboardPaste,!1)},n.prototype.unRegisterClipboardEvents=function(){self.removeEventListener("copy",this.onClipboardCopy),self.removeEventListener("cut",this.onClipboardCut),self.removeEventListener("paste",this.onClipboardPaste)},n.prototype.attachToMesh=function(t,e){var i=this;void 0===e&&(e=!0);var n=this.getScene();n&&(this._pointerObserver=n.onPointerObservable.add((function(e,n){if(e.type===E.POINTERMOVE||e.type===E.POINTERUP||e.type===E.POINTERDOWN){var s=e.event.pointerId||i._defaultMousePointerId;if(e.pickInfo&&e.pickInfo.hit&&e.pickInfo.pickedMesh===t){var r=e.pickInfo.getTextureCoordinates();if(r){var o=i.getSize();i._doPicking(r.x*o.width,(i.applyYInversionOnUpdate?1-r.y:r.y)*o.height,e,e.type,s,e.event.button)}}else if(e.type===E.POINTERUP){if(i._lastControlDown[s]&&i._lastControlDown[s]._forcePointerUp(s),delete i._lastControlDown[s],i.focusedControl){var a=i.focusedControl.keepsFocusWith(),h=!0;if(a)for(var l=0,c=a;l<c.length;l++){var u=c[l];if(i!==u._host){var p=u._host;if(p._lastControlOver[s]&&p._lastControlOver[s].isAscendant(u)){h=!1;break}}}h&&(i.focusedControl=null)}}else e.type===E.POINTERMOVE&&(i._lastControlOver[s]&&i._lastControlOver[s]._onPointerOut(i._lastControlOver[s],e,!0),delete i._lastControlOver[s])}})),t.enablePointerMoveEvents=e,this._attachToOnPointerOut(n),this._attachToOnBlur(n))},n.prototype.moveFocusToControl=function(t){this.focusedControl=t,this._lastPickedControl=t,this._blockNextFocusCheck=!0},n.prototype._manageFocus=function(){if(this._blockNextFocusCheck)return this._blockNextFocusCheck=!1,void(this._lastPickedControl=this._focusedControl);if(this._focusedControl&&this._focusedControl!==this._lastPickedControl){if(this._lastPickedControl.isFocusInvisible)return;this.focusedControl=null}},n.prototype._attachToOnPointerOut=function(t){var e=this;this._canvasPointerOutObserver=t.getEngine().onCanvasPointerOutObservable.add((function(t){e._lastControlOver[t.pointerId]&&e._lastControlOver[t.pointerId]._onPointerOut(e._lastControlOver[t.pointerId],null),delete e._lastControlOver[t.pointerId],e._lastControlDown[t.pointerId]&&e._lastControlDown[t.pointerId]!==e._capturingControl[t.pointerId]&&(e._lastControlDown[t.pointerId]._forcePointerUp(),delete e._lastControlDown[t.pointerId])}))},n.prototype._attachToOnBlur=function(t){var e=this;this._canvasBlurObserver=t.getEngine().onCanvasBlurObservable.add((function(t){Object.entries(e._lastControlDown).forEach((function(t){t[0],t[1]._onCanvasBlur()})),e._lastControlDown={}}))},n.CreateForMesh=function(t,e,i,s,r,o){void 0===e&&(e=1024),void 0===i&&(i=1024),void 0===s&&(s=!0),void 0===r&&(r=!1);var a=new n(t.name+" AdvancedDynamicTexture",e,i,t.getScene(),!0,M.TRILINEAR_SAMPLINGMODE,o),h=new w("AdvancedDynamicTextureMaterial",t.getScene());return h.backFaceCulling=!1,h.diffuseColor=P.Black(),h.specularColor=P.Black(),r?(h.diffuseTexture=a,h.emissiveTexture=a,a.hasAlpha=!0):(h.emissiveTexture=a,h.opacityTexture=a),t.material=h,a.attachToMesh(t,s),a},n.CreateForMeshTexture=function(t,e,i,s,r){void 0===e&&(e=1024),void 0===i&&(i=1024),void 0===s&&(s=!0);var o=new n(t.name+" AdvancedDynamicTexture",e,i,t.getScene(),!0,M.TRILINEAR_SAMPLINGMODE,r);return o.attachToMesh(t,s),o},n.CreateFullscreenUI=function(t,e,i,s){void 0===e&&(e=!0),void 0===i&&(i=null),void 0===s&&(s=M.BILINEAR_SAMPLINGMODE);var r=new n(t,0,0,i,!1,s),o=new Gs(t+"_layer",null,i,!e);return o.texture=r,r._layerToDispose=o,r._isFullscreen=!0,r.attach(),r},n}(x);(ir=er||(er={}))[ir.Clip=0]="Clip",ir[ir.WordWrap=1]="WordWrap",ir[ir.Ellipsis=2]="Ellipsis";var or=function(t){function e(e,i){void 0===i&&(i="");var n=t.call(this,e)||this;return n.name=e,n._text="",n._textWrapping=er.Clip,n._textHorizontalAlignment=Ks.HORIZONTAL_ALIGNMENT_CENTER,n._textVerticalAlignment=Ks.VERTICAL_ALIGNMENT_CENTER,n._resizeToFit=!1,n._lineSpacing=new zs(0),n._outlineWidth=0,n._outlineColor="white",n._underline=!1,n._lineThrough=!1,n.onTextChangedObservable=new a,n.onLinesReadyObservable=new a,n.text=i,n}return i(e,t),Object.defineProperty(e.prototype,"lines",{get:function(){return this._lines},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizeToFit",{get:function(){return this._resizeToFit},set:function(t){this._resizeToFit!==t&&(this._resizeToFit=t,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWrapping",{get:function(){return this._textWrapping},set:function(t){this._textWrapping!==t&&(this._textWrapping=+t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHorizontalAlignment",{get:function(){return this._textHorizontalAlignment},set:function(t){this._textHorizontalAlignment!==t&&(this._textHorizontalAlignment=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textVerticalAlignment",{get:function(){return this._textVerticalAlignment},set:function(t){this._textVerticalAlignment!==t&&(this._textVerticalAlignment=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return this._lineSpacing.toString(this._host)},set:function(t){this._lineSpacing.fromString(t)&&this._markAsDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return this._underline},set:function(t){this._underline!==t&&(this._underline=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineThrough",{get:function(){return this._lineThrough},set:function(t){this._lineThrough!==t&&(this._lineThrough=t,this._markAsDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(t){this._outlineColor!==t&&(this._outlineColor=t,this._markAsDirty())},enumerable:!1,configurable:!0}),e.prototype._getTypeName=function(){return"TextBlock"},e.prototype._processMeasures=function(e,i){this._fontOffset||(this._fontOffset=Ks._GetFontOffset(i.font)),t.prototype._processMeasures.call(this,e,i),this._lines=this._breakLines(this._currentMeasure.width,i),this.onLinesReadyObservable.notifyObservers(this);for(var n=0,s=0;s<this._lines.length;s++){var r=this._lines[s];r.width>n&&(n=r.width)}if(this._resizeToFit){if(this._textWrapping===er.Clip){var o=this.paddingLeftInPixels+this.paddingRightInPixels+n|0;o!==this._width.internalValue&&(this._width.updateInPlace(o,zs.UNITMODE_PIXEL),this._rebuildLayout=!0)}var a=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*this._lines.length|0;if(this._lines.length>0&&0!==this._lineSpacing.internalValue){var h=0;h=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),a+=(this._lines.length-1)*h}a!==this._height.internalValue&&(this._height.updateInPlace(a,zs.UNITMODE_PIXEL),this._rebuildLayout=!0)}},e.prototype._drawText=function(t,e,i,n){var s=this._currentMeasure.width,r=0;switch(this._textHorizontalAlignment){case Ks.HORIZONTAL_ALIGNMENT_LEFT:r=0;break;case Ks.HORIZONTAL_ALIGNMENT_RIGHT:r=s-e;break;case Ks.HORIZONTAL_ALIGNMENT_CENTER:r=(s-e)/2}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur,n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&n.strokeText(t,this._currentMeasure.left+r,i),n.fillText(t,this._currentMeasure.left+r,i),this._underline&&(n.beginPath(),n.lineWidth=Math.round(.05*this.fontSizeInPixels),n.moveTo(this._currentMeasure.left+r,i+3),n.lineTo(this._currentMeasure.left+r+e,i+3),n.stroke(),n.closePath()),this._lineThrough&&(n.beginPath(),n.lineWidth=Math.round(.05*this.fontSizeInPixels),n.moveTo(this._currentMeasure.left+r,i-this.fontSizeInPixels/3),n.lineTo(this._currentMeasure.left+r+e,i-this.fontSizeInPixels/3),n.stroke(),n.closePath())},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._renderLines(t),t.restore()},e.prototype._applyStates=function(e){t.prototype._applyStates.call(this,e),this.outlineWidth&&(e.lineWidth=this.outlineWidth,e.strokeStyle=this.outlineColor,e.lineJoin="miter",e.miterLimit=2)},e.prototype._breakLines=function(t,e){var i=[],n=this.text.split("\n");if(this._textWrapping===er.Ellipsis)for(var s=0,r=n;s<r.length;s++){var o=r[s];i.push(this._parseLineEllipsis(o,t,e))}else if(this._textWrapping===er.WordWrap)for(var a=0,h=n;a<h.length;a++){o=h[a];i.push.apply(i,this._parseLineWordWrap(o,t,e))}else for(var l=0,c=n;l<c.length;l++){o=c[l];i.push(this._parseLine(o,e))}return i},e.prototype._parseLine=function(t,e){return void 0===t&&(t=""),{text:t,width:e.measureText(t).width}},e.prototype._parseLineEllipsis=function(t,e,i){void 0===t&&(t="");var n=i.measureText(t).width;n>e&&(t+="…");var s=Array.from&&Array.from(t);if(s)for(;s.length&&n>e;)s.pop(),t=s.join("")+"...",n=i.measureText(t).width;else for(;t.length>2&&n>e;)t=t.slice(0,-2)+"…",n=i.measureText(t).width;return{text:t,width:n}},e.prototype._parseLineWordWrap=function(t,e,i){void 0===t&&(t="");for(var n=[],s=this.wordSplittingFunction?this.wordSplittingFunction(t):t.split(" "),r=0,o=0;o<s.length;o++){var a=o>0?t+" "+s[o]:s[0],h=i.measureText(a).width;h>e&&o>0?(n.push({text:t,width:r}),t=s[o],r=i.measureText(t).width):(r=h,t=a)}return n.push({text:t,width:r}),n},e.prototype._renderLines=function(t){var e=this._currentMeasure.height,i=0;switch(this._textVerticalAlignment){case Ks.VERTICAL_ALIGNMENT_TOP:i=this._fontOffset.ascent;break;case Ks.VERTICAL_ALIGNMENT_BOTTOM:i=e-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case Ks.VERTICAL_ALIGNMENT_CENTER:i=this._fontOffset.ascent+(e-this._fontOffset.height*this._lines.length)/2}i+=this._currentMeasure.top;for(var n=0;n<this._lines.length;n++){var s=this._lines[n];0!==n&&0!==this._lineSpacing.internalValue&&(this._lineSpacing.isPixel?i+=this._lineSpacing.getValue(this._host):i+=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(s.text,s.width,i,t),i+=this._fontOffset.height}},e.prototype.computeExpectedHeight=function(){if(this.text&&this.widthInPixels){var t=document.createElement("canvas").getContext("2d");if(t){this._applyStates(t),this._fontOffset||(this._fontOffset=Ks._GetFontOffset(t.font));var e=this._lines?this._lines:this._breakLines(this.widthInPixels-this.paddingLeftInPixels-this.paddingRightInPixels,t),i=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*e.length;if(e.length>0&&0!==this._lineSpacing.internalValue){var n=0;n=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),i+=(e.length-1)*n}return i}}return 0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onTextChangedObservable.clear()},e}(Ks);T.RegisteredTypes["BABYLON.GUI.TextBlock"]=or,R.CreatePlane=function(t){var e=[],i=[],n=[],s=[],r=t.width||t.size||1,o=t.height||t.size||1,a=0===t.sideOrientation?0:t.sideOrientation||R.DEFAULTSIDE,h=r/2,l=o/2;i.push(-h,-l,0),n.push(0,0,-1),s.push(0,0),i.push(h,-l,0),n.push(0,0,-1),s.push(1,0),i.push(h,l,0),n.push(0,0,-1),s.push(1,1),i.push(-h,l,0),n.push(0,0,-1),s.push(0,1),e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),R._ComputeSides(a,i,e,n,s,t.frontUVs,t.backUVs);var c=new R;return c.indices=e,c.positions=i,c.normals=n,c.uvs=s,c},h.CreatePlane=function(t,e,i,n,s){var r={size:e,width:e,height:e,sideOrientation:s,updatable:n};return ar.CreatePlane(t,r,i)};var ar=function(){function t(){}return t.CreatePlane=function(t,e,i){void 0===i&&(i=null);var n=new h(t,i);return e.sideOrientation=h._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,R.CreatePlane(e).applyToMesh(n,e.updatable),e.sourcePlane&&(n.translate(e.sourcePlane.normal,-e.sourcePlane.d),n.setDirection(e.sourcePlane.normal.scale(-1))),n},t}();const hr=t=>t<.001?.001:t;class lr{constructor(t=!1,e=10){this.BJSCANNON=CANNON,this._physicsMaterials=[],this.world=new this.BJSCANNON.World,this.world.allowSleep=!0,this.world.solver.iterations=e,this.world.broadphase=new this.BJSCANNON.NaiveBroadphase,this._useDeltaForWorldStep=t}isSupported(){return!0}executeStep(t,e){this.world.step(this._useDeltaForWorldStep?t:.5*t)}setTimeStep(t){this._fixedTimeStep=t}setGravity(t){this.world.gravity.set(t.x,t.y,t.z)}sleepBody(t){t.physicsBody.sleep()}wakeUpBody(t){t.physicsBody.wakeUp()}setLinearVelocity(t,e){t.physicsBody.velocity.set(e.x,e.y,e.z)}setAngularVelocity(t,e){t.physicsBody.angularVelocity.set(e.x,e.y,e.z)}setPhysicsBodyTransformation(t,e,i){t.physicsBody.position.set(e.x,e.y,e.z),t.physicsBody.quaternion.set(i.x,i.y,i.z,i.w)}setTransformationFromPhysicsBody(t){const{position:e,quaternion:i}=t.physicsBody;t.object.position.set(e.x,e.y,e.z),t.object.rotationQuaternion&&t.object.rotationQuaternion.set(i.x,i.y,i.z,i.w)}applyImpulse(t,e,i){t.physicsBody.applyImpulse(new this.BJSCANNON.Vec3(e.x,e.y,e.z),new this.BJSCANNON.Vec3(i.x,i.y,i.z))}generatePhysicsBody(t){if(t.isBodyInitRequired()){const e=t.getObjectExtendSize().scale(.5),i=new this.BJSCANNON.Vec3(hr(e.x),hr(e.y),hr(e.z));t.physicsBody=new this.BJSCANNON.Body({mass:t.getParam("mass"),material:this._addMaterial("mat-"+t.uniqueId,t.getParam("friction"),t.getParam("restitution"))}),t.physicsBody.addShape(new this.BJSCANNON.Box(i)),t.physicsBody.addEventListener("collide",t.onCollide),this.world.addEventListener("preStep",t.beforeStep),this.world.addEventListener("postStep",t.afterStep),this.world.addBody(t.physicsBody)}const e=t.object;e.computeWorldMatrix&&e.computeWorldMatrix(!0),e.getBoundingInfo()}_addMaterial(t,e,i){let n,s;for(n=0;n<this._physicsMaterials.length;++n)if(s=this._physicsMaterials[n],s.friction===e&&s.restitution===i)return s;const r=new this.BJSCANNON.Material(t);return r.friction=e,r.restitution=i,this._physicsMaterials.push(r),r}}const cr=Array.from({length:10},((t,e)=>S(e))),ur={mass:1,friction:.9,restitution:.8},pr={mass:0,friction:.9,restitution:.8};(()=>{const e=new lr;I.enablePhysics(new t(0,-9.81,0),e);const i=Array.from({length:12},((t,e)=>{const i=.5*e+1.5,n=e<3?.5:1,s=.18*Math.pow(e/3.2,2)+.39,r=Math.ceil(2*i*Math.PI/n),o=2*Math.PI/r,a=11===e?2:-i/12;return Array.from({length:r},((t,e)=>{const r=N.CreateBox(`base-${e}`,{width:n,height:.1,depth:.6}),h=e*o;return r.isVisible=!1,r.rotation.y=h,r.rotation.x=a,r.position.y=s,r.position.x=i*Math.sin(h),r.position.z=i*Math.cos(h),r}))})).flat();i.unshift(N.CreateBox("cent",{width:2.3,height:.9,depth:2.3})),i[0].isVisible=!1,i.unshift(L),i.forEach((t=>{t.physicsImpostor=new Us(t,Us.BoxImpostor,pr)})),cr.forEach((t=>{t.physicsImpostor=new Us(t,Us.BoxImpostor,ur),t.physicsImpostor.physicsBody.allowSleep=!0,t.physicsImpostor.sleep()}))})();const fr=t=>{const e=new or;return e.color="white",e.fontFamily="monospace",Object.assign(e,t),e},_r=(()=>{const t=ar.CreatePlane("bowlPlane",{size:10});t.rotation.x=Math.PI/2,t.rotation.y=-Math.PI/2,t.position.y=2.5;const e=rr.CreateForMesh(t),i=fr({fontSize:100,top:"-2%"}),n=fr({fontSize:50,top:"10%"});return e.addControl(i),e.addControl(n),async(t,e)=>{i.text="ROLL:"+`${t}`.padStart(2,"  "),n.text=`${e} DICE`,await B(1500),i.text="",n.text=""}})(),dr=async(e={})=>{e.inRound=!0,e.throwing=0,e.score={},e.nudges=5,e.rolls=3,e.rollDice=5,e.rollNumber=1,e.rollResult=null;let i=null;const n=()=>{--e.rolls,++e.rollNumber,e.throwing=1,e.rollResult=null;const n=cr.slice(0,e.rollDice);n.forEach(((e,i)=>{e.position.x=4*F(),e.position.z=4*F(),e.position.y=7+1.5*i,e.rotation.z=F()*Math.PI,e.physicsImpostor.setLinearVelocity(new t(F(),F(),F())),e.physicsImpostor.setAngularVelocity(new t(F(),F(),F())),e.physicsImpostor.wakeUp()}));const s=I.onBeforeRenderObservable.add((()=>{n.every((t=>2===t.physicsImpostor.physicsBody.sleepState||(t.position.y<=0&&setTimeout((()=>t.physicsImpostor.sleep()),2e3),!1)))&&(I.onBeforeRenderObservable.remove(s),e.throwing=2,(async t=>{const n=[0,0,0,0,0,0];n.out=0,n.nil=0,t.forEach((t=>++n[D(t)]));const s=k(n);s.sort(((t,e)=>t.length-e.length)),console.log(n,s),e.rollResult=s;for(const i of s)await(null==e?void 0:e.showResult(i));s.length&&++e.rolls,e.nudges+=s.length,e.rollDice=5+Math.max(0,s.length-1),await B(2e3),e.throwing=3,e.rolls<1&&(I.onPointerObservable.remove(i),C.useAutoRotationBehavior=!0,e.inRound=!1,null==e||e.done(),setTimeout((()=>cr.forEach((t=>{t.position.y=-5}))),100))})(n))}))};await(async()=>{let t=C.autoRotationBehavior.idleRotationSpeed;for(;t>.001;)t*=.95,C.autoRotationBehavior.idleRotationSpeed=t,await B(20);C.useAutoRotationBehavior=!1})(),await _r(e.rollNumber,e.rollDice),i=I.onPointerObservable.add((i=>{if(1!==i.type)return;const{button:s}=i.event;if(0===s){if(0===e.throwing)return n();3===e.throwing&&(cr.forEach(((t,e)=>{t.position.x=50,t.position.z=2*e,t.position.y=-5})),_r(e.rollNumber,e.rollDice).then((()=>{e.throwing=0})))}else 2===s&&1===e.throwing&&e.nudges>0&&(cr.forEach((e=>{if(e.position.y<0||e.position.y>4)return;e.physicsImpostor.wakeUp();const i=new t(F(),2+5*Math.random(),F());e.physicsImpostor.applyImpulse(i,e.position)})),--e.nudges)}))};const gr={id:"startholder"},yr={key:0},mr={id:"nudges"},br={id:"rolls"};((...t)=>{const e=(Ds||(Ds=Mn(Ls))).createApp(...t),{mount:i}=e;return e.mount=t=>{const n=function(t){if(ct(t)){return document.querySelector(t)}return t}(t);if(!n)return;const s=e._component;lt(s)||s.render||s.template||(s.template=n.innerHTML),n.innerHTML="";const r=i(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e})({expose:[],setup(t){const e=je(null),i=je(""),n=je(!0),s=document.querySelector("#app"),r=document.querySelector("header"),o=we({inRound:!1,rolls:3,nudges:5,showResult:t=>new Promise((n=>{i.value=t,e.value.classList.add("show"),e.value.addEventListener("animationend",(()=>{i.value="",e.value.classList.remove("show"),setTimeout((()=>n()),100)}),{once:!0,capture:!1})})),done:()=>{r.style.marginTop=0,s.classList.remove("inactive")}}),a=()=>{r.style.marginTop="-100%",dr(o),s.classList.add("inactive")},h=document.querySelector(".ld");return h&&(h.classList.remove("running"),h.onclick=()=>{n.value=!1,setTimeout((()=>h.parentNode.removeChild(h)),1e3),a()}),(t,s)=>(jn(),Hn(Nn,null,[Qn("div",gr,[n.value||Ve(o).inRound?$n("",!0):(jn(),Hn("button",{key:0,class:"ld",onClick:a}," START "))]),Qn("div",{id:"result",ref:e},Y(i.value),513),Ve(o).inRound?(jn(),Hn("footer",yr,[Qn("div",mr,"NUDGE "+Y(Ve(o).nudges),1),Qn("div",br,Y(Ve(o).rolls),1)])):$n("",!0)],64))}}).mount("#app");
